import"./disclose-version.Bg9kRutz.js";import{l as Oe,p as Zn,f as Te,t as Fn,a as Hn,G as K,ag as St,P as J,u as Pt,h as Kt,d as ke,at as $n,g as Ne}from"./utils.BCvjygOv.js";import{s as Bn,a as Rt,t as xe,b as Ve,g as Pe,e as Gn}from"./store.Nan7lcVq.js";import{i as Re}from"./preload-helper.DCjzZeWy.js";import{b as Ie}from"./this.N_qOCn8v.js";import{bg as Un,bh as he,aL as Le,aM as qn,bi as Jt,bj as Wn,bk as jn,bl as Xn,bm as Yn,at as Qn}from"./state.BBiHDmzh.js";import{g as Kn}from"./index.CnXXx2IR.js";import{o as Jn}from"./index-client.f3GdDfgr.js";function Bs(t,e){var n=t.__className,r=tr(e);Oe&&t.className===r?t.__className=r:(n!==r||Oe&&t.className!==r)&&(e==null?t.removeAttribute("class"):t.className=r,t.__className=r)}function tr(t){return t??""}function te(t,e,n){if(n){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}let Tt=!0,gn,Ft,Ht;const er=1e3,nr=150,mn=Un(()=>{Tt=!0,gn()},er),rr=(t,e)=>{Ht==null||Ht();const{autoSync:n}=Kn(he);if(!n)return;gn=e;const r=t>nr;Tt||mn(),Tt=!r},sr=()=>(Ft||(Ft=new Promise(t=>{Ht=()=>{Ft=void 0,t()}})),Tt||mn(),Tt),Gs=()=>Ft??Promise.resolve();var ir=function(){var t="",e,n,r,s=[],i={passive:!0},a={passive:!1};window.addEventListener?(e="addEventListener",n="removeEventListener"):(e="attachEvent",n="detachEvent",t="on"),r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function o(d,g){var m=function(v){!v&&(v=window.event);var y={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return r=="mousewheel"?(y.deltaY=-.025*v.wheelDelta,v.wheelDeltaX&&(y.deltaX=-.025*v.wheelDeltaX)):y.deltaY=v.detail,g(y)};return s.push({element:d,fn:m}),m}function u(d){for(var g=0;g<s.length;g++)if(s[g].element===d)return s[g].fn;return function(){}}function l(d){for(var g=0;g<s.length;g++)if(s[g].element===d)return s.splice(g,1)}function h(d,g,m,v){var y;r==="wheel"?y=m:y=o(d,m),d[e](t+g,y,v?i:a)}function c(d,g,m,v){var y;r==="wheel"?y=m:y=u(d),d[n](t+g,y,v?i:a),l(d)}function f(d,g,m){h(d,r,g,m),r=="DOMMouseScroll"&&h(d,"MozMousePixelScroll",g,m)}function p(d,g,m){c(d,r,g,m),r=="DOMMouseScroll"&&c(d,"MozMousePixelScroll",g,m)}return{on:f,off:p}}(),we={extend:function(t,e){t=t||{};for(var n in e)this.isObject(e[n])?t[n]=this.extend(t[n],e[n]):t[n]=e[n];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,n;if(this.isElement(t))e=t;else if(typeof t=="string"||t instanceof String){if(e=document.querySelector(t),!e)throw new Error("Provided selector did not find any elements. Selector: "+t)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")n=e;else if(e.tagName.toLowerCase()==="object")n=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")n=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var n=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-n.left,t.clientY=t.touches[0].pageY-n.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(t.detail===2)return!0;if(e!=null){var n=t.timeStamp-e.timeStamp,r=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,e,n){var r=this,s,i,a,o=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:r.now(),o=null,a=t.apply(s,i),o||(s=i=null)};return function(){var h=r.now();!u&&n.leading===!1&&(u=h);var c=e-(h-u);return s=this,i=arguments,c<=0||c>e?(clearTimeout(o),o=null,u=h,a=t.apply(s,i),o||(s=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(l,c)),a}},createRequestAnimationFrame:function(t){var e=null;return t!=="auto"&&t<60&&t>1&&(e=Math.floor(1e3/t)),e===null?window.requestAnimationFrame||ze(33):ze(e)}};function ze(t){return function(e){window.setTimeout(e,t)}}var ee=we,vn="unknown";document.documentMode&&(vn="ie");var Me={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var n=null;if(ee.isElement(e)?n=e:n=t.querySelector(e),!n){var r=Array.prototype.slice.call(t.childNodes||t.children).filter(function(u){return u.nodeName!=="defs"&&u.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var s="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",s);var i=t.childNodes||t.children;if(i&&i.length>0)for(var a=i.length;a>0;a--)i[i.length-a].nodeName!=="defs"&&n.appendChild(i[i.length-a]);t.appendChild(n)}var o=[];return n.getAttribute("class")&&(o=n.getAttribute("class").split(" ")),~o.indexOf("svg-pan-zoom_viewport")||(o.push("svg-pan-zoom_viewport"),n.setAttribute("class",o.join(" "))),n},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),t.parentNode!==null){var e=t.getAttribute("style")||"";e.toLowerCase().indexOf("overflow")===-1&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:ee.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,n=0;n<e;n++){var r=t[n];r.parentNode.insertBefore(r,r)}},Le?Le.internetExplorerRedisplayInterval:null),setCTM:function(t,e,n){var r=this,s="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",s),"transform"in t.style?t.style.transform=s:"-ms-transform"in t.style?t.style["-ms-transform"]=s:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=s),vn==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var n=e.createSVGPoint();return ee.mouseAndTouchNormalize(t,e),n.x=t.clientX,n.y=t.clientY,n},getSvgCenterPoint:function(t,e,n){return this.createSVGPoint(t,e/2,n/2)},createSVGPoint:function(t,e,n){var r=t.createSVGPoint();return r.x=e,r.y=n,r}},j=Me,or={enable:function(t){var e=t.svg.querySelector("defs");e||(e=document.createElementNS(j.svgNS,"defs"),t.svg.appendChild(e));var n=e.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(j.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(r)}var s=document.createElementNS(j.svgNS,"g");s.setAttribute("id","svg-pan-zoom-controls"),s.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),s.setAttribute("class","svg-pan-zoom-control"),s.appendChild(this._createZoomIn(t)),s.appendChild(this._createZoomReset(t)),s.appendChild(this._createZoomOut(t)),t.svg.appendChild(s),t.controlIcons=s},_createZoomIn:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},_createZoomReset:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r);var s=document.createElementNS(j.svgNS,"path");return s.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),s.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(s),e},_createZoomOut:function(t){var e=document.createElementNS(j.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(n);var r=document.createElementNS(j.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(r),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}},ar=Me,gt=we,B=function(t,e){this.init(t,e)};B.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=gt.proxy(this.updateCTM,this),this.requestAnimationFrame=gt.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};B.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};B.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height};B.prototype.getViewBox=function(){return gt.extend({},this.viewBox)};B.prototype.processCTM=function(){var t=this.getCTM();if(this.options.fit||this.options.contain){var e;this.options.fit?e=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):e=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*t.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*t.a)*.5;t.e=n,t.f=r}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t};B.prototype.getOriginalState=function(){return gt.extend({},this.originalState)};B.prototype.getState=function(){return gt.extend({},this.activeState)};B.prototype.getZoom=function(){return this.activeState.zoom};B.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};B.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom};B.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};B.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t};B.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),n=this.isPanDifferent(t);if(e||n){if(e&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))===!1?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),s=!1,i=!1;r===!1?(t.e=this.getPan().x,t.f=this.getPan().y,s=i=!0):gt.isObject(r)&&(r.x===!1?(t.e=this.getPan().x,s=!0):gt.isNumber(r.x)&&(t.e=r.x),r.y===!1?(t.f=this.getPan().y,i=!0):gt.isNumber(r.y)&&(t.f=r.y)),s&&i||!this.isPanDifferent(t)?n=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||n)&&this.updateCTMOnNextFrame()}};B.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a};B.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f};B.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f};B.prototype.pendingUpdate=!1;B.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};B.prototype.updateCTM=function(){var t=this.getCTM();ar.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)};var lr=function(t,e){return new B(t,e)},bn=ir,ce=or,rt=we,at=Me,ur=lr,P=function(t,e){this.init(t,e)},hr={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},yn={passive:!0};P.prototype.init=function(t,e){var n=this;this.svg=t,this.defs=t.querySelector("defs"),at.setupSvgAttributes(this.svg),this.options=rt.extend(rt.extend({},hr),e),this.state="none";var r=at.getBoundingClientRectNormalized(t);this.width=r.width,this.height=r.height,this.viewport=ur(at.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(i,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(i,a)},onZoom:function(i){if(n.viewport&&n.options.onZoom)return n.options.onZoom(i)},beforePan:function(i,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(i,a)},onPan:function(i){if(n.viewport&&n.options.onPan)return n.options.onPan(i)},onUpdatedCTM:function(i){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(i)}});var s=this.getPublicInstance();s.setBeforeZoom(this.options.beforeZoom),s.setOnZoom(this.options.onZoom),s.setBeforePan(this.options.beforePan),s.setOnPan(this.options.onPan),s.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&ce.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};P.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(i){var a=t.handleMouseDown(i,e);return e=i,a},touchstart:function(i){var a=t.handleMouseDown(i,e);return e=i,a},mouseup:function(i){return t.handleMouseUp(i)},touchend:function(i){return t.handleMouseUp(i)},mousemove:function(i){return t.handleMouseMove(i)},touchmove:function(i){return t.handleMouseMove(i)},mouseleave:function(i){return t.handleMouseUp(i)},touchleave:function(i){return t.handleMouseUp(i)},touchcancel:function(i){return t.handleMouseUp(i)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var s in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(s,this.eventListeners[s],this.options.preventMouseEventsDefault?!1:yn);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};P.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(n){return t.handleMouseWheel(n)};var e=!this.options.preventMouseEventsDefault;bn.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}};P.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var t=!this.options.preventMouseEventsDefault;bn.off(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!1}};P.prototype.handleMouseWheel=function(t){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&t.deltaMode===0&&t.wheelDelta&&(e=t.deltaY===0?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/r;var s=this.svg.getScreenCTM().inverse(),i=at.getEventPoint(t,this.svg).matrixTransform(s),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(a,i)}};P.prototype.zoomAtPoint=function(t,e,n){var r=this.viewport.getOriginalState();n?(t=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,t)),t=t/this.getZoom()):this.getZoom()*t<this.options.minZoom*r.zoom?t=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*r.zoom&&(t=this.options.maxZoom*r.zoom/this.getZoom());var s=this.viewport.getCTM(),i=e.matrixTransform(s.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(t).translate(-i.x,-i.y),o=s.multiply(a);o.a!==s.a&&this.viewport.setCTM(o)};P.prototype.zoom=function(t,e){this.zoomAtPoint(t,at.getSvgCenterPoint(this.svg,this.width,this.height),e)};P.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)};P.prototype.publicZoomAtPoint=function(t,e,n){if(n&&(t=this.computeFromRelativeZoom(t)),rt.getType(e)!=="SVGPoint")if("x"in e&&"y"in e)e=at.createSVGPoint(this.svg,e.x,e.y);else throw new Error("Given point is invalid");this.zoomAtPoint(t,e,n)};P.prototype.getZoom=function(){return this.viewport.getZoom()};P.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};P.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom};P.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)};P.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};P.prototype.reset=function(){this.resetZoom(),this.resetPan()};P.prototype.handleDblClick=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled){var e=t.target.getAttribute("class")||"";if(e.indexOf("svg-pan-zoom-control")>-1)return!1}var n;t.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=at.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)};P.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),rt.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&rt.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=at.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))};P.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var e=at.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(n)}};P.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&(this.state="none")};P.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)};P.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)};P.prototype.center=function(){var t=this.viewport.getViewBox(),e=(this.width-(t.width+t.x*2)*this.getZoom())*.5,n=(this.height-(t.height+t.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:e,y:n})};P.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};P.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)};P.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)};P.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}};P.prototype.resize=function(){var t=at.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};P.prototype.destroy=function(){var t=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var e in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],this.options.preventMouseEventsDefault?!1:yn);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),ht=ht.filter(function(n){return n.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};P.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=e===null?null:rt.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=e===null?null:rt.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,ce.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,ce.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=e===null?null:rt.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=e===null?null:rt.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,n){return t.publicZoomAtPoint(e,n,!0),t.pi},zoomAtPointBy:function(e,n){return t.publicZoomAtPoint(e,n,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=e===null?null:rt.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var ht=[],cr=function(t,e){var n=rt.getSvg(t);if(n===null)return null;for(var r=ht.length-1;r>=0;r--)if(ht[r].svg===n)return ht[r].instance.getPublicInstance();return ht.push({svg:n,instance:new P(n,e)}),ht[ht.length-1].instance.getPublicInstance()},fr=cr;const pr=qn(fr);function fe(t,e,n){if(t&&t.length){const[r,s]=e,i=Math.PI/180*n,a=Math.cos(i),o=Math.sin(i);for(const u of t){const[l,h]=u;u[0]=(l-r)*a-(h-s)*o+r,u[1]=(l-r)*o+(h-s)*a+s}}}function dr(t,e,n){const r=[];t.forEach(s=>r.push(...s)),fe(r,e,n)}function gr(t,e){return t[0]===e[0]&&t[1]===e[1]}function mr(t,e,n,r=1){const s=n,i=Math.max(e,.1),a=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,o=[0,0];if(s)for(const l of a)fe(l,o,s);const u=vr(a,i,r);if(s){for(const l of a)fe(l,o,-s);dr(u,o,-s)}return u}function vr(t,e,n){const r=[];for(const l of t){const h=[...l];gr(h[0],h[h.length-1])||h.push([h[0][0],h[0][1]]),h.length>2&&r.push(h)}const s=[];e=Math.max(e,.1);const i=[];for(const l of r)for(let h=0;h<l.length-1;h++){const c=l[h],f=l[h+1];if(c[1]!==f[1]){const p=Math.min(c[1],f[1]);i.push({ymin:p,ymax:Math.max(c[1],f[1]),x:p===c[1]?c[0]:f[0],islope:(f[0]-c[0])/(f[1]-c[1])})}}if(i.sort((l,h)=>l.ymin<h.ymin?-1:l.ymin>h.ymin?1:l.x<h.x?-1:l.x>h.x?1:l.ymax===h.ymax?0:(l.ymax-h.ymax)/Math.abs(l.ymax-h.ymax)),!i.length)return s;let a=[],o=i[0].ymin,u=0;for(;a.length||i.length;){if(i.length){let l=-1;for(let c=0;c<i.length&&!(i[c].ymin>o);c++)l=c;i.splice(0,l+1).forEach(c=>{a.push({s:o,edge:c})})}if(a=a.filter(l=>!(l.edge.ymax<=o)),a.sort((l,h)=>l.edge.x===h.edge.x?0:(l.edge.x-h.edge.x)/Math.abs(l.edge.x-h.edge.x)),(n!==1||u%e===0)&&a.length>1)for(let l=0;l<a.length;l=l+2){const h=l+1;if(h>=a.length)break;const c=a[l].edge,f=a[h].edge;s.push([[Math.round(c.x),o],[Math.round(f.x),o]])}o+=n,a.forEach(l=>{l.edge.x=l.edge.x+n*l.edge.islope}),u++}return s}function Vt(t,e){var n;const r=e.hachureAngle+90;let s=e.hachureGap;s<0&&(s=e.strokeWidth*4),s=Math.round(Math.max(s,.1));let i=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(i=s),mr(t,s,r,i||1)}class Se{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=Vt(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const s of e)r.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],n));return r}}function Yt(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class br extends Se{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const s=Object.assign({},n,{hachureGap:r}),i=Vt(e,s),a=Math.PI/180*n.hachureAngle,o=[],u=r*.5*Math.cos(a),l=r*.5*Math.sin(a);for(const[c,f]of i)Yt([c,f])&&o.push([[c[0]-u,c[1]+l],[...f]],[[c[0]+u,c[1]-l],[...f]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}}class yr extends Se{fillPolygons(e,n){const r=this._fillPolygons(e,n),s=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),i=this._fillPolygons(e,s);return r.ops=r.ops.concat(i.ops),r}}class xr{constructor(e){this.helper=e}fillPolygons(e,n){n=Object.assign({},n,{hachureAngle:0});const r=Vt(e,n);return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let s=n.hachureGap;s<0&&(s=n.strokeWidth*4),s=Math.max(s,.1);let i=n.fillWeight;i<0&&(i=n.strokeWidth/2);const a=s/4;for(const o of e){const u=Yt(o),l=u/s,h=Math.ceil(l)-1,c=u-h*s,f=(o[0][0]+o[1][0])/2-s/4,p=Math.min(o[0][1],o[1][1]);for(let d=0;d<h;d++){const g=p+c+d*s,m=f-a+Math.random()*2*a,v=g-a+Math.random()*2*a,y=this.helper.ellipse(m,v,i,i,n);r.push(...y.ops)}}return{type:"fillSketch",ops:r}}}class wr{constructor(e){this.helper=e}fillPolygons(e,n){const r=Vt(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,s=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,i=[];return e.forEach(a=>{const o=Yt(a),u=Math.floor(o/(r+s)),l=(o+s-u*(r+s))/2;let h=a[0],c=a[1];h[0]>c[0]&&(h=a[1],c=a[0]);const f=Math.atan((c[1]-h[1])/(c[0]-h[0]));for(let p=0;p<u;p++){const d=p*(r+s),g=d+r,m=[h[0]+d*Math.cos(f)+l*Math.cos(f),h[1]+d*Math.sin(f)+l*Math.sin(f)],v=[h[0]+g*Math.cos(f)+l*Math.cos(f),h[1]+g*Math.sin(f)+l*Math.sin(f)];i.push(...this.helper.doubleLineOps(m[0],m[1],v[0],v[1],n))}}),i}}class Mr{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,s=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+s});const i=Vt(e,n);return{type:"fillSketch",ops:this.zigzagLines(i,s,n)}}zigzagLines(e,n,r){const s=[];return e.forEach(i=>{const a=Yt(i),o=Math.round(a/(2*n));let u=i[0],l=i[1];u[0]>l[0]&&(u=i[1],l=i[0]);const h=Math.atan((l[1]-u[1])/(l[0]-u[0]));for(let c=0;c<o;c++){const f=c*2*n,p=(c+1)*2*n,d=Math.sqrt(2*Math.pow(n,2)),g=[u[0]+f*Math.cos(h),u[1]+f*Math.sin(h)],m=[u[0]+p*Math.cos(h),u[1]+p*Math.sin(h)],v=[g[0]+d*Math.cos(h+Math.PI/4),g[1]+d*Math.sin(h+Math.PI/4)];s.push(...this.helper.doubleLineOps(g[0],g[1],v[0],v[1],r),...this.helper.doubleLineOps(v[0],v[1],m[0],m[1],r))}}),s}}const W={};function Sr(t,e){let n=t.fillStyle||"hachure";if(!W[n])switch(n){case"zigzag":W[n]||(W[n]=new br(e));break;case"cross-hatch":W[n]||(W[n]=new yr(e));break;case"dots":W[n]||(W[n]=new xr(e));break;case"dashed":W[n]||(W[n]=new wr(e));break;case"zigzag-line":W[n]||(W[n]=new Mr(e));break;case"hachure":default:n="hachure",W[n]||(W[n]=new Se(e));break}return W[n]}function Ar(){return Math.floor(Math.random()*2**31)}class xn{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const Er=0,pe=1,wn=2,It={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Cr(t){const e=new Array;for(;t!=="";)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:Er,text:RegExp.$1},t=t.substr(RegExp.$1.length);else if(t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))e[e.length]={type:pe,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length);else return[];return e[e.length]={type:wn,text:""},e}function ne(t,e){return t.type===e}function Ae(t){const e=[],n=Cr(t);let r="BOD",s=0,i=n[s];for(;!ne(i,wn);){let a=0;const o=[];if(r==="BOD")if(i.text==="M"||i.text==="m")s++,a=It[i.text],r=i.text;else return Ae("M0,0"+t);else ne(i,pe)?a=It[r]:(s++,a=It[i.text],r=i.text);if(s+a<n.length){for(let u=s;u<s+a;u++){const l=n[u];if(ne(l,pe))o[o.length]=+l.text;else throw new Error("Param not a number: "+r+","+l.text)}if(typeof It[r]=="number"){const u={key:r,data:o};e.push(u),s+=a,i=n[s],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return e}function Mn(t){let e=0,n=0,r=0,s=0;const i=[];for(const{key:a,data:o}of t)switch(a){case"M":i.push({key:"M",data:[...o]}),[e,n]=o,[r,s]=o;break;case"m":e+=o[0],n+=o[1],i.push({key:"M",data:[e,n]}),r=e,s=n;break;case"L":i.push({key:"L",data:[...o]}),[e,n]=o;break;case"l":e+=o[0],n+=o[1],i.push({key:"L",data:[e,n]});break;case"C":i.push({key:"C",data:[...o]}),e=o[4],n=o[5];break;case"c":{const u=o.map((l,h)=>h%2?l+n:l+e);i.push({key:"C",data:u}),e=u[4],n=u[5];break}case"Q":i.push({key:"Q",data:[...o]}),e=o[2],n=o[3];break;case"q":{const u=o.map((l,h)=>h%2?l+n:l+e);i.push({key:"Q",data:u}),e=u[2],n=u[3];break}case"A":i.push({key:"A",data:[...o]}),e=o[5],n=o[6];break;case"a":e+=o[5],n+=o[6],i.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,n]});break;case"H":i.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...o]}),n=o[0];break;case"v":n+=o[0],i.push({key:"V",data:[n]});break;case"S":i.push({key:"S",data:[...o]}),e=o[2],n=o[3];break;case"s":{const u=o.map((l,h)=>h%2?l+n:l+e);i.push({key:"S",data:u}),e=u[2],n=u[3];break}case"T":i.push({key:"T",data:[...o]}),e=o[0],n=o[1];break;case"t":e+=o[0],n+=o[1],i.push({key:"T",data:[e,n]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=r,n=s;break}return i}function Sn(t){const e=[];let n="",r=0,s=0,i=0,a=0,o=0,u=0;for(const{key:l,data:h}of t){switch(l){case"M":e.push({key:"M",data:[...h]}),[r,s]=h,[i,a]=h;break;case"C":e.push({key:"C",data:[...h]}),r=h[4],s=h[5],o=h[2],u=h[3];break;case"L":e.push({key:"L",data:[...h]}),[r,s]=h;break;case"H":r=h[0],e.push({key:"L",data:[r,s]});break;case"V":s=h[0],e.push({key:"L",data:[r,s]});break;case"S":{let c=0,f=0;n==="C"||n==="S"?(c=r+(r-o),f=s+(s-u)):(c=r,f=s),e.push({key:"C",data:[c,f,...h]}),o=h[0],u=h[1],r=h[2],s=h[3];break}case"T":{const[c,f]=h;let p=0,d=0;n==="Q"||n==="T"?(p=r+(r-o),d=s+(s-u)):(p=r,d=s);const g=r+2*(p-r)/3,m=s+2*(d-s)/3,v=c+2*(p-c)/3,y=f+2*(d-f)/3;e.push({key:"C",data:[g,m,v,y,c,f]}),o=p,u=d,r=c,s=f;break}case"Q":{const[c,f,p,d]=h,g=r+2*(c-r)/3,m=s+2*(f-s)/3,v=p+2*(c-p)/3,y=d+2*(f-d)/3;e.push({key:"C",data:[g,m,v,y,p,d]}),o=c,u=f,r=p,s=d;break}case"A":{const c=Math.abs(h[0]),f=Math.abs(h[1]),p=h[2],d=h[3],g=h[4],m=h[5],v=h[6];c===0||f===0?(e.push({key:"C",data:[r,s,m,v,m,v]}),r=m,s=v):(r!==m||s!==v)&&(An(r,s,m,v,c,f,p,d,g).forEach(function(E){e.push({key:"C",data:E})}),r=m,s=v);break}case"Z":e.push({key:"Z",data:[]}),r=i,s=a;break}n=l}return e}function _r(t){return Math.PI*t/180}function At(t,e,n){const r=t*Math.cos(n)-e*Math.sin(n),s=t*Math.sin(n)+e*Math.cos(n);return[r,s]}function An(t,e,n,r,s,i,a,o,u,l){const h=_r(a);let c=[],f=0,p=0,d=0,g=0;if(l)[f,p,d,g]=l;else{[t,e]=At(t,e,-h),[n,r]=At(n,r,-h);const V=(t-n)/2,k=(e-r)/2;let z=V*V/(s*s)+k*k/(i*i);z>1&&(z=Math.sqrt(z),s=z*s,i=z*i);const $=o===u?-1:1,R=s*s,q=i*i,G=R*q-R*k*k-q*V*V,H=R*k*k+q*V*V,D=$*Math.sqrt(Math.abs(G/H));d=D*s*k/i+(t+n)/2,g=D*-i*V/s+(e+r)/2,f=Math.asin(parseFloat(((e-g)/i).toFixed(9))),p=Math.asin(parseFloat(((r-g)/i).toFixed(9))),t<d&&(f=Math.PI-f),n<d&&(p=Math.PI-p),f<0&&(f=Math.PI*2+f),p<0&&(p=Math.PI*2+p),u&&f>p&&(f=f-Math.PI*2),!u&&p>f&&(p=p-Math.PI*2)}let m=p-f;if(Math.abs(m)>Math.PI*120/180){const V=p,k=n,z=r;u&&p>f?p=f+Math.PI*120/180*1:p=f+Math.PI*120/180*-1,n=d+s*Math.cos(p),r=g+i*Math.sin(p),c=An(n,r,k,z,s,i,a,0,u,[p,V,d,g])}m=p-f;const v=Math.cos(f),y=Math.sin(f),E=Math.cos(p),M=Math.sin(p),O=Math.tan(m/4),C=4/3*s*O,x=4/3*i*O,T=[t,e],N=[t+C*y,e-x*v],I=[n+C*M,r-x*E],L=[n,r];if(N[0]=2*T[0]-N[0],N[1]=2*T[1]-N[1],l)return[N,I,L].concat(c);{c=[N,I,L].concat(c);const V=[];for(let k=0;k<c.length;k+=3){const z=At(c[k][0],c[k][1],h),$=At(c[k+1][0],c[k+1][1],h),R=At(c[k+2][0],c[k+2][1],h);V.push([z[0],z[1],$[0],$[1],R[0],R[1]])}return V}}const Or={randOffset:Pr,randOffsetWithRange:Rr,ellipse:Nr,doubleLineOps:Ir};function En(t,e,n,r,s){return{type:"path",ops:mt(t,e,n,r,s)}}function $t(t,e,n){const r=(t||[]).length;if(r>2){const s=[];for(let i=0;i<r-1;i++)s.push(...mt(t[i][0],t[i][1],t[i+1][0],t[i+1][1],n));return e&&s.push(...mt(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:s}}else if(r===2)return En(t[0][0],t[0][1],t[1][0],t[1][1],n);return{type:"path",ops:[]}}function Tr(t,e){return $t(t,!0,e)}function kr(t,e,n,r,s){const i=[[t,e],[t+n,e],[t+n,e+r],[t,e+r]];return Tr(i,s)}function De(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,s=Lt(r[0],1*(1+e.roughness*.2),e),i=e.disableMultiStroke?[]:Lt(r[0],1.5*(1+e.roughness*.22),He(e));for(let a=1;a<r.length;a++){const o=r[a];if(o.length){const u=Lt(o,1*(1+e.roughness*.2),e),l=e.disableMultiStroke?[]:Lt(o,1.5*(1+e.roughness*.22),He(e));for(const h of u)h.op!=="move"&&s.push(h);for(const h of l)h.op!=="move"&&i.push(h)}}return{type:"path",ops:s.concat(i)}}return{type:"path",ops:[]}}function Nr(t,e,n,r,s){const i=Cn(n,r,s);return de(t,e,s,i).opset}function Cn(t,e,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),s=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),i=Math.PI*2/s;let a=Math.abs(t/2),o=Math.abs(e/2);const u=1-n.curveFitting;return a+=S(a*u,n),o+=S(o*u,n),{increment:i,rx:a,ry:o}}function de(t,e,n,r){const[s,i]=$e(r.increment,t,e,r.rx,r.ry,1,r.increment*Gt(.1,Gt(.4,1,n),n),n);let a=Ut(s,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[o]=$e(r.increment,t,e,r.rx,r.ry,1.5,0,n),u=Ut(o,null,n);a=a.concat(u)}return{estimatedPoints:i,opset:{type:"path",ops:a}}}function Ze(t,e,n,r,s,i,a,o,u){const l=t,h=e;let c=Math.abs(n/2),f=Math.abs(r/2);c+=S(c*.01,u),f+=S(f*.01,u);let p=s,d=i;for(;p<0;)p+=Math.PI*2,d+=Math.PI*2;d-p>Math.PI*2&&(p=0,d=Math.PI*2);const g=Math.PI*2/u.curveStepCount,m=Math.min(g/2,(d-p)/2),v=Be(m,l,h,c,f,p,d,1,u);if(!u.disableMultiStroke){const y=Be(m,l,h,c,f,p,d,1.5,u);v.push(...y)}return a&&(o?v.push(...mt(l,h,l+c*Math.cos(p),h+f*Math.sin(p),u),...mt(l,h,l+c*Math.cos(d),h+f*Math.sin(d),u)):v.push({op:"lineTo",data:[l,h]},{op:"lineTo",data:[l+c*Math.cos(p),h+f*Math.sin(p)]})),{type:"path",ops:v}}function Fe(t,e){const n=Sn(Mn(Ae(t))),r=[];let s=[0,0],i=[0,0];for(const{key:a,data:o}of n)switch(a){case"M":{i=[o[0],o[1]],s=[o[0],o[1]];break}case"L":r.push(...mt(i[0],i[1],o[0],o[1],e)),i=[o[0],o[1]];break;case"C":{const[u,l,h,c,f,p]=o;r.push(...Lr(u,l,h,c,f,p,i,e)),i=[f,p];break}case"Z":r.push(...mt(i[0],i[1],s[0],s[1],e)),i=[s[0],s[1]];break}return{type:"path",ops:r}}function re(t,e){const n=[];for(const r of t)if(r.length){const s=e.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+S(s,e),r[0][1]+S(s,e)]});for(let a=1;a<i;a++)n.push({op:"lineTo",data:[r[a][0]+S(s,e),r[a][1]+S(s,e)]})}}return{type:"fillPath",ops:n}}function xt(t,e){return Sr(e,Or).fillPolygons(t,e)}function Vr(t,e,n,r,s,i,a){const o=t,u=e;let l=Math.abs(n/2),h=Math.abs(r/2);l+=S(l*.01,a),h+=S(h*.01,a);let c=s,f=i;for(;c<0;)c+=Math.PI*2,f+=Math.PI*2;f-c>Math.PI*2&&(c=0,f=Math.PI*2);const p=(f-c)/a.curveStepCount,d=[];for(let g=c;g<=f;g=g+p)d.push([o+l*Math.cos(g),u+h*Math.sin(g)]);return d.push([o+l*Math.cos(f),u+h*Math.sin(f)]),d.push([o,u]),xt([d],a)}function Pr(t,e){return S(t,e)}function Rr(t,e,n){return Gt(t,e,n)}function Ir(t,e,n,r,s){return mt(t,e,n,r,s,!0)}function He(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function _n(t){return t.randomizer||(t.randomizer=new xn(t.seed||0)),t.randomizer.next()}function Gt(t,e,n,r=1){return n.roughness*r*(_n(n)*(e-t)+t)}function S(t,e,n=1){return Gt(-t,t,e,n)}function mt(t,e,n,r,s,i=!1){const a=i?s.disableMultiStrokeFill:s.disableMultiStroke,o=ge(t,e,n,r,s,!0,!1);if(a)return o;const u=ge(t,e,n,r,s,!0,!0);return o.concat(u)}function ge(t,e,n,r,s,i,a){const o=Math.pow(t-n,2)+Math.pow(e-r,2),u=Math.sqrt(o);let l=1;u<200?l=1:u>500?l=.4:l=-.0016668*u+1.233334;let h=s.maxRandomnessOffset||0;h*h*100>o&&(h=u/10);const c=h/2,f=.2+_n(s)*.2;let p=s.bowing*s.maxRandomnessOffset*(r-e)/200,d=s.bowing*s.maxRandomnessOffset*(t-n)/200;p=S(p,s,l),d=S(d,s,l);const g=[],m=()=>S(c,s,l),v=()=>S(h,s,l),y=s.preserveVertices;return a?g.push({op:"move",data:[t+(y?0:m()),e+(y?0:m())]}):g.push({op:"move",data:[t+(y?0:S(h,s,l)),e+(y?0:S(h,s,l))]}),a?g.push({op:"bcurveTo",data:[p+t+(n-t)*f+m(),d+e+(r-e)*f+m(),p+t+2*(n-t)*f+m(),d+e+2*(r-e)*f+m(),n+(y?0:m()),r+(y?0:m())]}):g.push({op:"bcurveTo",data:[p+t+(n-t)*f+v(),d+e+(r-e)*f+v(),p+t+2*(n-t)*f+v(),d+e+2*(r-e)*f+v(),n+(y?0:v()),r+(y?0:v())]}),g}function Lt(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+S(e,n),t[0][1]+S(e,n)]),r.push([t[0][0]+S(e,n),t[0][1]+S(e,n)]);for(let s=1;s<t.length;s++)r.push([t[s][0]+S(e,n),t[s][1]+S(e,n)]),s===t.length-1&&r.push([t[s][0]+S(e,n),t[s][1]+S(e,n)]);return Ut(r,null,n)}function Ut(t,e,n){const r=t.length,s=[];if(r>3){const i=[],a=1-n.curveTightness;s.push({op:"move",data:[t[1][0],t[1][1]]});for(let o=1;o+2<r;o++){const u=t[o];i[0]=[u[0],u[1]],i[1]=[u[0]+(a*t[o+1][0]-a*t[o-1][0])/6,u[1]+(a*t[o+1][1]-a*t[o-1][1])/6],i[2]=[t[o+1][0]+(a*t[o][0]-a*t[o+2][0])/6,t[o+1][1]+(a*t[o][1]-a*t[o+2][1])/6],i[3]=[t[o+1][0],t[o+1][1]],s.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else r===3?(s.push({op:"move",data:[t[1][0],t[1][1]]}),s.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&s.push(...ge(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return s}function $e(t,e,n,r,s,i,a,o){const u=o.roughness===0,l=[],h=[];if(u){t=t/4,h.push([e+r*Math.cos(-t),n+s*Math.sin(-t)]);for(let c=0;c<=Math.PI*2;c=c+t){const f=[e+r*Math.cos(c),n+s*Math.sin(c)];l.push(f),h.push(f)}h.push([e+r*Math.cos(0),n+s*Math.sin(0)]),h.push([e+r*Math.cos(t),n+s*Math.sin(t)])}else{const c=S(.5,o)-Math.PI/2;h.push([S(i,o)+e+.9*r*Math.cos(c-t),S(i,o)+n+.9*s*Math.sin(c-t)]);const f=Math.PI*2+c-.01;for(let p=c;p<f;p=p+t){const d=[S(i,o)+e+r*Math.cos(p),S(i,o)+n+s*Math.sin(p)];l.push(d),h.push(d)}h.push([S(i,o)+e+r*Math.cos(c+Math.PI*2+a*.5),S(i,o)+n+s*Math.sin(c+Math.PI*2+a*.5)]),h.push([S(i,o)+e+.98*r*Math.cos(c+a),S(i,o)+n+.98*s*Math.sin(c+a)]),h.push([S(i,o)+e+.9*r*Math.cos(c+a*.5),S(i,o)+n+.9*s*Math.sin(c+a*.5)])}return[h,l]}function Be(t,e,n,r,s,i,a,o,u){const l=i+S(.1,u),h=[];h.push([S(o,u)+e+.9*r*Math.cos(l-t),S(o,u)+n+.9*s*Math.sin(l-t)]);for(let c=l;c<=a;c=c+t)h.push([S(o,u)+e+r*Math.cos(c),S(o,u)+n+s*Math.sin(c)]);return h.push([e+r*Math.cos(a),n+s*Math.sin(a)]),h.push([e+r*Math.cos(a),n+s*Math.sin(a)]),Ut(h,null,u)}function Lr(t,e,n,r,s,i,a,o){const u=[],l=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let h=[0,0];const c=o.disableMultiStroke?1:2,f=o.preserveVertices;for(let p=0;p<c;p++)p===0?u.push({op:"move",data:[a[0],a[1]]}):u.push({op:"move",data:[a[0]+(f?0:S(l[0],o)),a[1]+(f?0:S(l[0],o))]}),h=f?[s,i]:[s+S(l[p],o),i+S(l[p],o)],u.push({op:"bcurveTo",data:[t+S(l[p],o),e+S(l[p],o),n+S(l[p],o),r+S(l[p],o),h[0],h[1]]});return u}function Et(t){return[...t]}function Ge(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Et(t[0]),Et(t[1]),Et(t[2]),Et(t[2]));else{const s=[];s.push(t[0],t[0]);for(let o=1;o<t.length;o++)s.push(t[o]),o===t.length-1&&s.push(t[o]);const i=[],a=1-e;r.push(Et(s[0]));for(let o=1;o+2<s.length;o++){const u=s[o];i[0]=[u[0],u[1]],i[1]=[u[0]+(a*s[o+1][0]-a*s[o-1][0])/6,u[1]+(a*s[o+1][1]-a*s[o-1][1])/6],i[2]=[s[o+1][0]+(a*s[o][0]-a*s[o+2][0])/6,s[o+1][1]+(a*s[o][1]-a*s[o+2][1])/6],i[3]=[s[o+1][0],s[o+1][1]],r.push(i[1],i[2],i[3])}}return r}function zr(t,e){return Math.sqrt(Bt(t,e))}function Bt(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function Dr(t,e,n){const r=Bt(e,n);if(r===0)return Bt(t,e);let s=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return s=Math.max(0,Math.min(1,s)),Bt(t,vt(e,n,s))}function vt(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function Zr(t,e){const n=t[e+0],r=t[e+1],s=t[e+2],i=t[e+3];let a=3*r[0]-2*n[0]-i[0];a*=a;let o=3*r[1]-2*n[1]-i[1];o*=o;let u=3*s[0]-2*i[0]-n[0];u*=u;let l=3*s[1]-2*i[1]-n[1];return l*=l,a<u&&(a=u),o<l&&(o=l),a+o}function me(t,e,n,r){const s=r||[];if(Zr(t,e)<n){const i=t[e+0];s.length?zr(s[s.length-1],i)>1&&s.push(i):s.push(i),s.push(t[e+3])}else{const a=t[e+0],o=t[e+1],u=t[e+2],l=t[e+3],h=vt(a,o,.5),c=vt(o,u,.5),f=vt(u,l,.5),p=vt(h,c,.5),d=vt(c,f,.5),g=vt(p,d,.5);me([a,h,p,g],0,n,s),me([g,d,f,l],0,n,s)}return s}function Fr(t,e){return qt(t,0,t.length,e)}function qt(t,e,n,r,s){const i=s||[],a=t[e],o=t[n-1];let u=0,l=1;for(let h=e+1;h<n-1;++h){const c=Dr(t[h],a,o);c>u&&(u=c,l=h)}return Math.sqrt(u)>r?(qt(t,e,l+1,r,i),qt(t,l,n,r,i)):(i.length||i.push(a),i.push(o)),i}function ve(t,e=.15,n){const r=[],s=(t.length-1)/3;for(let i=0;i<s;i++){const a=i*3;me(t,a,e,r)}return n&&n>0?qt(r,0,r.length,n):r}function Hr(t,e,n){const r=Ae(t),s=Sn(Mn(r)),i=[];let a=[],o=[0,0],u=[];const l=()=>{u.length>=4&&a.push(...ve(u,e)),u=[]},h=()=>{l(),a.length&&(i.push(a),a=[])};for(const{key:f,data:p}of s)switch(f){case"M":h(),o=[p[0],p[1]],a.push(o);break;case"L":l(),a.push([p[0],p[1]]);break;case"C":if(!u.length){const d=a.length?a[a.length-1]:o;u.push([d[0],d[1]])}u.push([p[0],p[1]]),u.push([p[2],p[3]]),u.push([p[4],p[5]]);break;case"Z":l(),a.push([o[0],o[1]]);break}if(h(),!n)return i;const c=[];for(const f of i){const p=Fr(f,n);p.length&&c.push(p)}return c}const X="none";class Wt{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Ar()}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,s,i){const a=this._o(i);return this._d("line",[En(e,n,r,s,a)],a)}rectangle(e,n,r,s,i){const a=this._o(i),o=[],u=kr(e,n,r,s,a);if(a.fill){const l=[[e,n],[e+r,n],[e+r,n+s],[e,n+s]];a.fillStyle==="solid"?o.push(re([l],a)):o.push(xt([l],a))}return a.stroke!==X&&o.push(u),this._d("rectangle",o,a)}ellipse(e,n,r,s,i){const a=this._o(i),o=[],u=Cn(r,s,a),l=de(e,n,a,u);if(a.fill)if(a.fillStyle==="solid"){const h=de(e,n,a,u).opset;h.type="fillPath",o.push(h)}else o.push(xt([l.estimatedPoints],a));return a.stroke!==X&&o.push(l.opset),this._d("ellipse",o,a)}circle(e,n,r,s){const i=this.ellipse(e,n,r,r,s);return i.shape="circle",i}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[$t(e,!1,r)],r)}arc(e,n,r,s,i,a,o=!1,u){const l=this._o(u),h=[],c=Ze(e,n,r,s,i,a,o,!0,l);if(o&&l.fill)if(l.fillStyle==="solid"){const f=Object.assign({},l);f.disableMultiStroke=!0;const p=Ze(e,n,r,s,i,a,!0,!1,f);p.type="fillPath",h.push(p)}else h.push(Vr(e,n,r,s,i,a,l));return l.stroke!==X&&h.push(c),this._d("arc",h,l)}curve(e,n){const r=this._o(n),s=[],i=De(e,r);if(r.fill&&r.fill!==X)if(r.fillStyle==="solid"){const a=De(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(a.ops)})}else{const a=[],o=e;if(o.length){const l=typeof o[0][0]=="number"?[o]:o;for(const h of l)h.length<3?a.push(...h):h.length===3?a.push(...ve(Ge([h[0],h[0],h[1],h[2]]),10,(1+r.roughness)/2)):a.push(...ve(Ge(h),10,(1+r.roughness)/2))}a.length&&s.push(xt([a],r))}return r.stroke!==X&&s.push(i),this._d("curve",s,r)}polygon(e,n){const r=this._o(n),s=[],i=$t(e,!0,r);return r.fill&&(r.fillStyle==="solid"?s.push(re([e],r)):s.push(xt([e],r))),r.stroke!==X&&s.push(i),this._d("polygon",s,r)}path(e,n){const r=this._o(n),s=[];if(!e)return this._d("path",s,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=r.fill&&r.fill!=="transparent"&&r.fill!==X,a=r.stroke!==X,o=!!(r.simplification&&r.simplification<1),u=o?4-4*(r.simplification||1):(1+r.roughness)/2,l=Hr(e,1,u),h=Fe(e,r);if(i)if(r.fillStyle==="solid")if(l.length===1){const c=Fe(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else s.push(re(l,r));else s.push(xt(l,r));return a&&(o?l.forEach(c=>{s.push($t(c,!1,r))}):s.push(h)),this._d("path",s,r)}opsToPath(e,n){let r="";for(const s of e.ops){const i=typeof n=="number"&&n>=0?s.data.map(a=>+a.toFixed(n)):s.data;switch(s.op){case"move":r+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":r+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":r+=`L${i[0]} ${i[1]} `;break}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,s=[];for(const i of n){let a=null;switch(i.type){case"path":a={d:this.opsToPath(i),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:X};break;case"fillPath":a={d:this.opsToPath(i),stroke:X,strokeWidth:0,fill:r.fill||X};break;case"fillSketch":a=this.fillSketch(i,r);break}a&&s.push(a)}return s}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||X,strokeWidth:r,fill:X}}_mergedShape(e){return e.filter((n,r)=>r===0?!0:n.op!=="move")}}class $r{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Wt(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),s=this.ctx,i=e.options.fixedDecimalPlaceDigits;for(const a of n)switch(a.type){case"path":s.save(),s.strokeStyle=r.stroke==="none"?"transparent":r.stroke,s.lineWidth=r.strokeWidth,r.strokeLineDash&&s.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(s.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(s,a,i),s.restore();break;case"fillPath":{s.save(),s.fillStyle=r.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,a,i,o),s.restore();break}case"fillSketch":this.fillSketch(s,a,r);break}}fillSketch(e,n,r){let s=r.fillWeight;s<0&&(s=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=s,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,s="nonzero"){e.beginPath();for(const i of n.ops){const a=typeof r=="number"&&r>=0?i.data.map(o=>+o.toFixed(r)):i.data;switch(i.op){case"move":e.moveTo(a[0],a[1]);break;case"bcurveTo":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"lineTo":e.lineTo(a[0],a[1]);break}}n.type==="fillPath"?e.fill(s):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,s,i){const a=this.gen.line(e,n,r,s,i);return this.draw(a),a}rectangle(e,n,r,s,i){const a=this.gen.rectangle(e,n,r,s,i);return this.draw(a),a}ellipse(e,n,r,s,i){const a=this.gen.ellipse(e,n,r,s,i);return this.draw(a),a}circle(e,n,r,s){const i=this.gen.circle(e,n,r,s);return this.draw(i),i}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,s,i,a,o=!1,u){const l=this.gen.arc(e,n,r,s,i,a,o,u);return this.draw(l),l}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const zt="http://www.w3.org/2000/svg";class Br{constructor(e,n){this.svg=e,this.gen=new Wt(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,i=s.createElementNS(zt,"g"),a=e.options.fixedDecimalPlaceDigits;for(const o of n){let u=null;switch(o.type){case"path":{u=s.createElementNS(zt,"path"),u.setAttribute("d",this.opsToPath(o,a)),u.setAttribute("stroke",r.stroke),u.setAttribute("stroke-width",r.strokeWidth+""),u.setAttribute("fill","none"),r.strokeLineDash&&u.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{u=s.createElementNS(zt,"path"),u.setAttribute("d",this.opsToPath(o,a)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",r.fill||""),(e.shape==="curve"||e.shape==="polygon")&&u.setAttribute("fill-rule","evenodd");break}case"fillSketch":{u=this.fillSketch(s,o,r);break}}u&&i.appendChild(u)}return i}fillSketch(e,n,r){let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const i=e.createElementNS(zt,"path");return i.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),i.setAttribute("stroke",r.fill||""),i.setAttribute("stroke-width",s+""),i.setAttribute("fill","none"),r.fillLineDash&&i.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,s,i){const a=this.gen.line(e,n,r,s,i);return this.draw(a)}rectangle(e,n,r,s,i){const a=this.gen.rectangle(e,n,r,s,i);return this.draw(a)}ellipse(e,n,r,s,i){const a=this.gen.ellipse(e,n,r,s,i);return this.draw(a)}circle(e,n,r,s){const i=this.gen.circle(e,n,r,s);return this.draw(i)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,s,i,a,o=!1,u){const l=this.gen.arc(e,n,r,s,i,a,o,u);return this.draw(l)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}const Gr={canvas(t,e){return new $r(t,e)},svg(t,e){return new Br(t,e)},generator(t){return new Wt(t)},newSeed(){return Wt.newSeed()}};function jt(t){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(t)}var Ur=/^\s+/,qr=/\s+$/;function w(t,e){if(t=t||"",e=e||{},t instanceof w)return t;if(!(this instanceof w))return new w(t,e);var n=Wr(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}w.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),n,r,s,i,a,o;return n=e.r/255,r=e.g/255,s=e.b/255,n<=.03928?i=n/12.92:i=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),.2126*i+.7152*a+.0722*o},setAlpha:function(e){return this._a=On(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=qe(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=qe(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this._a==1?"hsv("+n+", "+r+"%, "+s+"%)":"hsva("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var e=Ue(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Ue(this._r,this._g,this._b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this._a==1?"hsl("+n+", "+r+"%, "+s+"%)":"hsla("+n+", "+r+"%, "+s+"%, "+this._roundA+")"},toHex:function(e){return We(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return Qr(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Z(this._r,255)*100)+"%",g:Math.round(Z(this._g,255)*100)+"%",b:Math.round(Z(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Z(this._r,255)*100)+"%, "+Math.round(Z(this._g,255)*100)+"%, "+Math.round(Z(this._b,255)*100)+"%)":"rgba("+Math.round(Z(this._r,255)*100)+"%, "+Math.round(Z(this._g,255)*100)+"%, "+Math.round(Z(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:us[We(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var n="#"+je(this._r,this._g,this._b,this._a),r=n,s=this._gradientType?"GradientType = 1, ":"";if(e){var i=w(e);r="#"+je(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,s=this._a<1&&this._a>=0,i=!n&&s&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return i?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return w(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(es,arguments)},brighten:function(){return this._applyModification(ns,arguments)},darken:function(){return this._applyModification(rs,arguments)},desaturate:function(){return this._applyModification(Kr,arguments)},saturate:function(){return this._applyModification(Jr,arguments)},greyscale:function(){return this._applyModification(ts,arguments)},spin:function(){return this._applyModification(ss,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(as,arguments)},complement:function(){return this._applyCombination(is,arguments)},monochromatic:function(){return this._applyCombination(ls,arguments)},splitcomplement:function(){return this._applyCombination(os,arguments)},triad:function(){return this._applyCombination(Xe,[3])},tetrad:function(){return this._applyCombination(Xe,[4])}};w.fromRatio=function(t,e){if(jt(t)=="object"){var n={};for(var r in t)t.hasOwnProperty(r)&&(r==="a"?n[r]=t[r]:n[r]=Ct(t[r]));t=n}return w(t,e)};function Wr(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,a=!1,o=!1;return typeof t=="string"&&(t=ps(t)),jt(t)=="object"&&(lt(t.r)&&lt(t.g)&&lt(t.b)?(e=jr(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):lt(t.h)&&lt(t.s)&&lt(t.v)?(r=Ct(t.s),s=Ct(t.v),e=Yr(t.h,r,s),a=!0,o="hsv"):lt(t.h)&&lt(t.s)&&lt(t.l)&&(r=Ct(t.s),i=Ct(t.l),e=Xr(t.h,r,i),a=!0,o="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=On(n),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}function jr(t,e,n){return{r:Z(t,255)*255,g:Z(e,255)*255,b:Z(n,255)*255}}function Ue(t,e,n){t=Z(t,255),e=Z(e,255),n=Z(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=(r+s)/2;if(r==s)i=a=0;else{var u=r-s;switch(a=o>.5?u/(2-r-s):u/(r+s),r){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4;break}i/=6}return{h:i,s:a,l:o}}function Xr(t,e,n){var r,s,i;t=Z(t,360),e=Z(e,100),n=Z(n,100);function a(l,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?l+(h-l)*6*c:c<1/2?h:c<2/3?l+(h-l)*(2/3-c)*6:l}if(e===0)r=s=i=n;else{var o=n<.5?n*(1+e):n+e-n*e,u=2*n-o;r=a(u,o,t+1/3),s=a(u,o,t),i=a(u,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function qe(t,e,n){t=Z(t,255),e=Z(e,255),n=Z(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i,a,o=r,u=r-s;if(a=r===0?0:u/r,r==s)i=0;else{switch(r){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4;break}i/=6}return{h:i,s:a,v:o}}function Yr(t,e,n){t=Z(t,360)*6,e=Z(e,100),n=Z(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),a=n*(1-s*e),o=n*(1-(1-s)*e),u=r%6,l=[n,a,i,i,o,n][u],h=[o,n,n,a,i,i][u],c=[i,i,o,n,n,a][u];return{r:l*255,g:h*255,b:c*255}}function We(t,e,n,r){var s=[st(Math.round(t).toString(16)),st(Math.round(e).toString(16)),st(Math.round(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Qr(t,e,n,r,s){var i=[st(Math.round(t).toString(16)),st(Math.round(e).toString(16)),st(Math.round(n).toString(16)),st(Tn(r))];return s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function je(t,e,n,r){var s=[st(Tn(r)),st(Math.round(t).toString(16)),st(Math.round(e).toString(16)),st(Math.round(n).toString(16))];return s.join("")}w.equals=function(t,e){return!t||!e?!1:w(t).toRgbString()==w(e).toRgbString()};w.random=function(){return w.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Kr(t,e){e=e===0?0:e||10;var n=w(t).toHsl();return n.s-=e/100,n.s=Qt(n.s),w(n)}function Jr(t,e){e=e===0?0:e||10;var n=w(t).toHsl();return n.s+=e/100,n.s=Qt(n.s),w(n)}function ts(t){return w(t).desaturate(100)}function es(t,e){e=e===0?0:e||10;var n=w(t).toHsl();return n.l+=e/100,n.l=Qt(n.l),w(n)}function ns(t,e){e=e===0?0:e||10;var n=w(t).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),w(n)}function rs(t,e){e=e===0?0:e||10;var n=w(t).toHsl();return n.l-=e/100,n.l=Qt(n.l),w(n)}function ss(t,e){var n=w(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,w(n)}function is(t){var e=w(t).toHsl();return e.h=(e.h+180)%360,w(e)}function Xe(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var n=w(t).toHsl(),r=[w(t)],s=360/e,i=1;i<e;i++)r.push(w({h:(n.h+i*s)%360,s:n.s,l:n.l}));return r}function os(t){var e=w(t).toHsl(),n=e.h;return[w(t),w({h:(n+72)%360,s:e.s,l:e.l}),w({h:(n+216)%360,s:e.s,l:e.l})]}function as(t,e,n){e=e||6,n=n||30;var r=w(t).toHsl(),s=360/n,i=[w(t)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(w(r));return i}function ls(t,e){e=e||6;for(var n=w(t).toHsv(),r=n.h,s=n.s,i=n.v,a=[],o=1/e;e--;)a.push(w({h:r,s,v:i})),i=(i+o)%1;return a}w.mix=function(t,e,n){n=n===0?0:n||50;var r=w(t).toRgb(),s=w(e).toRgb(),i=n/100,a={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return w(a)};w.readability=function(t,e){var n=w(t),r=w(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)};w.isReadable=function(t,e,n){var r=w.readability(t,e),s,i;switch(i=!1,s=ds(n),s.level+s.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7;break}return i};w.mostReadable=function(t,e,n){var r=null,s=0,i,a,o,u;n=n||{},a=n.includeFallbackColors,o=n.level,u=n.size;for(var l=0;l<e.length;l++)i=w.readability(t,e[l]),i>s&&(s=i,r=w(e[l]));return w.isReadable(t,r,{level:o,size:u})||!a?r:(n.includeFallbackColors=!1,w.mostReadable(t,["#fff","#000"],n))};var be=w.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},us=w.hexNames=hs(be);function hs(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function On(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Z(t,e){cs(t)&&(t="100%");var n=fs(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function Qt(t){return Math.min(1,Math.max(0,t))}function Y(t){return parseInt(t,16)}function cs(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function fs(t){return typeof t=="string"&&t.indexOf("%")!=-1}function st(t){return t.length==1?"0"+t:""+t}function Ct(t){return t<=1&&(t=t*100+"%"),t}function Tn(t){return Math.round(parseFloat(t)*255).toString(16)}function Ye(t){return Y(t)/255}var et=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",s="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function lt(t){return!!et.CSS_UNIT.exec(t)}function ps(t){t=t.replace(Ur,"").replace(qr,"").toLowerCase();var e=!1;if(be[t])t=be[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=et.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=et.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=et.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=et.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=et.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=et.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=et.hex8.exec(t))?{r:Y(n[1]),g:Y(n[2]),b:Y(n[3]),a:Ye(n[4]),format:e?"name":"hex8"}:(n=et.hex6.exec(t))?{r:Y(n[1]),g:Y(n[2]),b:Y(n[3]),format:e?"name":"hex"}:(n=et.hex4.exec(t))?{r:Y(n[1]+""+n[1]),g:Y(n[2]+""+n[2]),b:Y(n[3]+""+n[3]),a:Ye(n[4]+""+n[4]),format:e?"name":"hex8"}:(n=et.hex3.exec(t))?{r:Y(n[1]+""+n[1]),g:Y(n[2]+""+n[2]),b:Y(n[3]+""+n[3]),format:e?"name":"hex"}:!1}function ds(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:e,size:n}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var kn=function(t,e){return(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])})(t,e)};function Nn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}kn(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Vn(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.type===b.CLOSE_PATH)e+="z";else if(r.type===b.HORIZ_LINE_TO)e+=(r.relative?"h":"H")+r.x;else if(r.type===b.VERT_LINE_TO)e+=(r.relative?"v":"V")+r.y;else if(r.type===b.MOVE_TO)e+=(r.relative?"m":"M")+r.x+" "+r.y;else if(r.type===b.LINE_TO)e+=(r.relative?"l":"L")+r.x+" "+r.y;else if(r.type===b.CURVE_TO)e+=(r.relative?"c":"C")+r.x1+" "+r.y1+" "+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_CURVE_TO)e+=(r.relative?"s":"S")+r.x2+" "+r.y2+" "+r.x+" "+r.y;else if(r.type===b.QUAD_TO)e+=(r.relative?"q":"Q")+r.x1+" "+r.y1+" "+r.x+" "+r.y;else if(r.type===b.SMOOTH_QUAD_TO)e+=(r.relative?"t":"T")+r.x+" "+r.y;else{if(r.type!==b.ARC)throw new Error('Unexpected command type "'+r.type+'" at index '+n+".");e+=(r.relative?"a":"A")+r.rX+" "+r.rY+" "+r.xRot+" "+ +r.lArcFlag+" "+ +r.sweepFlag+" "+r.x+" "+r.y}}return e}function ye(t,e){var n=t[0],r=t[1];return[n*Math.cos(e)-r*Math.sin(e),n*Math.sin(e)+r*Math.cos(e)]}function nt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if(typeof t[n]!="number")throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var ct=Math.PI;function se(t,e,n){t.lArcFlag=t.lArcFlag===0?0:1,t.sweepFlag=t.sweepFlag===0?0:1;var r=t.rX,s=t.rY,i=t.x,a=t.y;r=Math.abs(t.rX),s=Math.abs(t.rY);var o=ye([(e-i)/2,(n-a)/2],-t.xRot/180*ct),u=o[0],l=o[1],h=Math.pow(u,2)/Math.pow(r,2)+Math.pow(l,2)/Math.pow(s,2);1<h&&(r*=Math.sqrt(h),s*=Math.sqrt(h)),t.rX=r,t.rY=s;var c=Math.pow(r,2)*Math.pow(l,2)+Math.pow(s,2)*Math.pow(u,2),f=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(r,2)*Math.pow(s,2)-c)/c)),p=r*l/s*f,d=-s*u/r*f,g=ye([p,d],t.xRot/180*ct);t.cX=g[0]+(e+i)/2,t.cY=g[1]+(n+a)/2,t.phi1=Math.atan2((l-d)/s,(u-p)/r),t.phi2=Math.atan2((-l-d)/s,(-u-p)/r),t.sweepFlag===0&&t.phi2>t.phi1&&(t.phi2-=2*ct),t.sweepFlag===1&&t.phi2<t.phi1&&(t.phi2+=2*ct),t.phi1*=180/ct,t.phi2*=180/ct}function Qe(t,e,n){nt(t,e,n);var r=t*t+e*e-n*n;if(0>r)return[];if(r===0)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var s=Math.sqrt(r);return[[(t*n+e*s)/(t*t+e*e),(e*n-t*s)/(t*t+e*e)],[(t*n-e*s)/(t*t+e*e),(e*n+t*s)/(t*t+e*e)]]}var F,ut=Math.PI/180;function Ke(t,e,n){return(1-n)*t+n*e}function Je(t,e,n,r){return t+Math.cos(r/180*ct)*e+Math.sin(r/180*ct)*n}function tn(t,e,n,r){var s=1e-6,i=e-t,a=n-e,o=3*i+3*(r-n)-6*a,u=6*(a-i),l=3*i;return Math.abs(o)<s?[-l/u]:function(h,c,f){var p=h*h/4-c;if(p<-f)return[];if(p<=f)return[-h/2];var d=Math.sqrt(p);return[-h/2-d,-h/2+d]}(u/o,l/o,s)}function en(t,e,n,r,s){var i=1-s;return t*(i*i*i)+e*(3*i*i*s)+n*(3*i*s*s)+r*(s*s*s)}(function(t){function e(){return s(function(o,u,l){return o.relative&&(o.x1!==void 0&&(o.x1+=u),o.y1!==void 0&&(o.y1+=l),o.x2!==void 0&&(o.x2+=u),o.y2!==void 0&&(o.y2+=l),o.x!==void 0&&(o.x+=u),o.y!==void 0&&(o.y+=l),o.relative=!1),o})}function n(){var o=NaN,u=NaN,l=NaN,h=NaN;return s(function(c,f,p){return c.type&b.SMOOTH_CURVE_TO&&(c.type=b.CURVE_TO,o=isNaN(o)?f:o,u=isNaN(u)?p:u,c.x1=c.relative?f-o:2*f-o,c.y1=c.relative?p-u:2*p-u),c.type&b.CURVE_TO?(o=c.relative?f+c.x2:c.x2,u=c.relative?p+c.y2:c.y2):(o=NaN,u=NaN),c.type&b.SMOOTH_QUAD_TO&&(c.type=b.QUAD_TO,l=isNaN(l)?f:l,h=isNaN(h)?p:h,c.x1=c.relative?f-l:2*f-l,c.y1=c.relative?p-h:2*p-h),c.type&b.QUAD_TO?(l=c.relative?f+c.x1:c.x1,h=c.relative?p+c.y1:c.y1):(l=NaN,h=NaN),c})}function r(){var o=NaN,u=NaN;return s(function(l,h,c){if(l.type&b.SMOOTH_QUAD_TO&&(l.type=b.QUAD_TO,o=isNaN(o)?h:o,u=isNaN(u)?c:u,l.x1=l.relative?h-o:2*h-o,l.y1=l.relative?c-u:2*c-u),l.type&b.QUAD_TO){o=l.relative?h+l.x1:l.x1,u=l.relative?c+l.y1:l.y1;var f=l.x1,p=l.y1;l.type=b.CURVE_TO,l.x1=((l.relative?0:h)+2*f)/3,l.y1=((l.relative?0:c)+2*p)/3,l.x2=(l.x+2*f)/3,l.y2=(l.y+2*p)/3}else o=NaN,u=NaN;return l})}function s(o){var u=0,l=0,h=NaN,c=NaN;return function(f){if(isNaN(h)&&!(f.type&b.MOVE_TO))throw new Error("path must start with moveto");var p=o(f,u,l,h,c);return f.type&b.CLOSE_PATH&&(u=h,l=c),f.x!==void 0&&(u=f.relative?u+f.x:f.x),f.y!==void 0&&(l=f.relative?l+f.y:f.y),f.type&b.MOVE_TO&&(h=u,c=l),p}}function i(o,u,l,h,c,f){return nt(o,u,l,h,c,f),s(function(p,d,g,m){var v=p.x1,y=p.x2,E=p.relative&&!isNaN(m),M=p.x!==void 0?p.x:E?0:d,O=p.y!==void 0?p.y:E?0:g;function C(yt){return yt*yt}p.type&b.HORIZ_LINE_TO&&u!==0&&(p.type=b.LINE_TO,p.y=p.relative?0:g),p.type&b.VERT_LINE_TO&&l!==0&&(p.type=b.LINE_TO,p.x=p.relative?0:d),p.x!==void 0&&(p.x=p.x*o+O*l+(E?0:c)),p.y!==void 0&&(p.y=M*u+p.y*h+(E?0:f)),p.x1!==void 0&&(p.x1=p.x1*o+p.y1*l+(E?0:c)),p.y1!==void 0&&(p.y1=v*u+p.y1*h+(E?0:f)),p.x2!==void 0&&(p.x2=p.x2*o+p.y2*l+(E?0:c)),p.y2!==void 0&&(p.y2=y*u+p.y2*h+(E?0:f));var x=o*h-u*l;if(p.xRot!==void 0&&(o!==1||u!==0||l!==0||h!==1))if(x===0)delete p.rX,delete p.rY,delete p.xRot,delete p.lArcFlag,delete p.sweepFlag,p.type=b.LINE_TO;else{var T=p.xRot*Math.PI/180,N=Math.sin(T),I=Math.cos(T),L=1/C(p.rX),V=1/C(p.rY),k=C(I)*L+C(N)*V,z=2*N*I*(L-V),$=C(N)*L+C(I)*V,R=k*h*h-z*u*h+$*u*u,q=z*(o*h+u*l)-2*(k*l*h+$*o*u),G=k*l*l-z*o*l+$*o*o,H=(Math.atan2(q,R-G)+Math.PI)%Math.PI/2,D=Math.sin(H),it=Math.cos(H);p.rX=Math.abs(x)/Math.sqrt(R*C(it)+q*D*it+G*C(D)),p.rY=Math.abs(x)/Math.sqrt(R*C(D)-q*D*it+G*C(it)),p.xRot=180*H/Math.PI}return p.sweepFlag!==void 0&&0>x&&(p.sweepFlag=+!p.sweepFlag),p})}function a(){return function(o){var u={};for(var l in o)u[l]=o[l];return u}}t.ROUND=function(o){function u(l){return Math.round(l*o)/o}return o===void 0&&(o=1e13),nt(o),function(l){return l.x1!==void 0&&(l.x1=u(l.x1)),l.y1!==void 0&&(l.y1=u(l.y1)),l.x2!==void 0&&(l.x2=u(l.x2)),l.y2!==void 0&&(l.y2=u(l.y2)),l.x!==void 0&&(l.x=u(l.x)),l.y!==void 0&&(l.y=u(l.y)),l.rX!==void 0&&(l.rX=u(l.rX)),l.rY!==void 0&&(l.rY=u(l.rY)),l}},t.TO_ABS=e,t.TO_REL=function(){return s(function(o,u,l){return o.relative||(o.x1!==void 0&&(o.x1-=u),o.y1!==void 0&&(o.y1-=l),o.x2!==void 0&&(o.x2-=u),o.y2!==void 0&&(o.y2-=l),o.x!==void 0&&(o.x-=u),o.y!==void 0&&(o.y-=l),o.relative=!0),o})},t.NORMALIZE_HVZ=function(o,u,l){return o===void 0&&(o=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),s(function(h,c,f,p,d){if(isNaN(p)&&!(h.type&b.MOVE_TO))throw new Error("path must start with moveto");return u&&h.type&b.HORIZ_LINE_TO&&(h.type=b.LINE_TO,h.y=h.relative?0:f),l&&h.type&b.VERT_LINE_TO&&(h.type=b.LINE_TO,h.x=h.relative?0:c),o&&h.type&b.CLOSE_PATH&&(h.type=b.LINE_TO,h.x=h.relative?p-c:p,h.y=h.relative?d-f:d),h.type&b.ARC&&(h.rX===0||h.rY===0)&&(h.type=b.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},t.NORMALIZE_ST=n,t.QT_TO_C=r,t.INFO=s,t.SANITIZE=function(o){o===void 0&&(o=0),nt(o);var u=NaN,l=NaN,h=NaN,c=NaN;return s(function(f,p,d,g,m){var v=Math.abs,y=!1,E=0,M=0;if(f.type&b.SMOOTH_CURVE_TO&&(E=isNaN(u)?0:p-u,M=isNaN(l)?0:d-l),f.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(u=f.relative?p+f.x2:f.x2,l=f.relative?d+f.y2:f.y2):(u=NaN,l=NaN),f.type&b.SMOOTH_QUAD_TO?(h=isNaN(h)?p:2*p-h,c=isNaN(c)?d:2*d-c):f.type&b.QUAD_TO?(h=f.relative?p+f.x1:f.x1,c=f.relative?d+f.y1:f.y2):(h=NaN,c=NaN),f.type&b.LINE_COMMANDS||f.type&b.ARC&&(f.rX===0||f.rY===0||!f.lArcFlag)||f.type&b.CURVE_TO||f.type&b.SMOOTH_CURVE_TO||f.type&b.QUAD_TO||f.type&b.SMOOTH_QUAD_TO){var O=f.x===void 0?0:f.relative?f.x:f.x-p,C=f.y===void 0?0:f.relative?f.y:f.y-d;E=isNaN(h)?f.x1===void 0?E:f.relative?f.x:f.x1-p:h-p,M=isNaN(c)?f.y1===void 0?M:f.relative?f.y:f.y1-d:c-d;var x=f.x2===void 0?0:f.relative?f.x:f.x2-p,T=f.y2===void 0?0:f.relative?f.y:f.y2-d;v(O)<=o&&v(C)<=o&&v(E)<=o&&v(M)<=o&&v(x)<=o&&v(T)<=o&&(y=!0)}return f.type&b.CLOSE_PATH&&v(p-g)<=o&&v(d-m)<=o&&(y=!0),y?[]:f})},t.MATRIX=i,t.ROTATE=function(o,u,l){u===void 0&&(u=0),l===void 0&&(l=0),nt(o,u,l);var h=Math.sin(o),c=Math.cos(o);return i(c,h,-h,c,u-u*c+l*h,l-u*h-l*c)},t.TRANSLATE=function(o,u){return u===void 0&&(u=0),nt(o,u),i(1,0,0,1,o,u)},t.SCALE=function(o,u){return u===void 0&&(u=o),nt(o,u),i(o,0,0,u,0,0)},t.SKEW_X=function(o){return nt(o),i(1,0,Math.atan(o),1,0,0)},t.SKEW_Y=function(o){return nt(o),i(1,Math.atan(o),0,1,0,0)},t.X_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),nt(o),i(-1,0,0,1,o,0)},t.Y_AXIS_SYMMETRY=function(o){return o===void 0&&(o=0),nt(o),i(1,0,0,-1,0,o)},t.A_TO_C=function(){return s(function(o,u,l){return b.ARC===o.type?function(h,c,f){var p,d,g,m;h.cX||se(h,c,f);for(var v=Math.min(h.phi1,h.phi2),y=Math.max(h.phi1,h.phi2)-v,E=Math.ceil(y/90),M=new Array(E),O=c,C=f,x=0;x<E;x++){var T=Ke(h.phi1,h.phi2,x/E),N=Ke(h.phi1,h.phi2,(x+1)/E),I=N-T,L=4/3*Math.tan(I*ut/4),V=[Math.cos(T*ut)-L*Math.sin(T*ut),Math.sin(T*ut)+L*Math.cos(T*ut)],k=V[0],z=V[1],$=[Math.cos(N*ut),Math.sin(N*ut)],R=$[0],q=$[1],G=[R+L*Math.sin(N*ut),q-L*Math.cos(N*ut)],H=G[0],D=G[1];M[x]={relative:h.relative,type:b.CURVE_TO};var it=function(yt,Mt){var _e=ye([yt*h.rX,Mt*h.rY],h.xRot),zn=_e[0],Dn=_e[1];return[h.cX+zn,h.cY+Dn]};p=it(k,z),M[x].x1=p[0],M[x].y1=p[1],d=it(H,D),M[x].x2=d[0],M[x].y2=d[1],g=it(R,q),M[x].x=g[0],M[x].y=g[1],h.relative&&(M[x].x1-=O,M[x].y1-=C,M[x].x2-=O,M[x].y2-=C,M[x].x-=O,M[x].y-=C),O=(m=[M[x].x,M[x].y])[0],C=m[1]}return M}(o,o.relative?0:u,o.relative?0:l):o})},t.ANNOTATE_ARCS=function(){return s(function(o,u,l){return o.relative&&(u=0,l=0),b.ARC===o.type&&se(o,u,l),o})},t.CLONE=a,t.CALCULATE_BOUNDS=function(){var o=function(f){var p={};for(var d in f)p[d]=f[d];return p},u=e(),l=r(),h=n(),c=s(function(f,p,d){var g=h(l(u(o(f))));function m(D){D>c.maxX&&(c.maxX=D),D<c.minX&&(c.minX=D)}function v(D){D>c.maxY&&(c.maxY=D),D<c.minY&&(c.minY=D)}if(g.type&b.DRAWING_COMMANDS&&(m(p),v(d)),g.type&b.HORIZ_LINE_TO&&m(g.x),g.type&b.VERT_LINE_TO&&v(g.y),g.type&b.LINE_TO&&(m(g.x),v(g.y)),g.type&b.CURVE_TO){m(g.x),v(g.y);for(var y=0,E=tn(p,g.x1,g.x2,g.x);y<E.length;y++)0<(H=E[y])&&1>H&&m(en(p,g.x1,g.x2,g.x,H));for(var M=0,O=tn(d,g.y1,g.y2,g.y);M<O.length;M++)0<(H=O[M])&&1>H&&v(en(d,g.y1,g.y2,g.y,H))}if(g.type&b.ARC){m(g.x),v(g.y),se(g,p,d);for(var C=g.xRot/180*Math.PI,x=Math.cos(C)*g.rX,T=Math.sin(C)*g.rX,N=-Math.sin(C)*g.rY,I=Math.cos(C)*g.rY,L=g.phi1<g.phi2?[g.phi1,g.phi2]:-180>g.phi2?[g.phi2+360,g.phi1+360]:[g.phi2,g.phi1],V=L[0],k=L[1],z=function(D){var it=D[0],yt=D[1],Mt=180*Math.atan2(yt,it)/Math.PI;return Mt<V?Mt+360:Mt},$=0,R=Qe(N,-x,0).map(z);$<R.length;$++)(H=R[$])>V&&H<k&&m(Je(g.cX,x,N,H));for(var q=0,G=Qe(I,-T,0).map(z);q<G.length;q++){var H;(H=G[q])>V&&H<k&&v(Je(g.cY,T,I,H))}}return f});return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}})(F||(F={}));var tt,Pn=function(){function t(){}return t.prototype.round=function(e){return this.transform(F.ROUND(e))},t.prototype.toAbs=function(){return this.transform(F.TO_ABS())},t.prototype.toRel=function(){return this.transform(F.TO_REL())},t.prototype.normalizeHVZ=function(e,n,r){return this.transform(F.NORMALIZE_HVZ(e,n,r))},t.prototype.normalizeST=function(){return this.transform(F.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(F.QT_TO_C())},t.prototype.aToC=function(){return this.transform(F.A_TO_C())},t.prototype.sanitize=function(e){return this.transform(F.SANITIZE(e))},t.prototype.translate=function(e,n){return this.transform(F.TRANSLATE(e,n))},t.prototype.scale=function(e,n){return this.transform(F.SCALE(e,n))},t.prototype.rotate=function(e,n,r){return this.transform(F.ROTATE(e,n,r))},t.prototype.matrix=function(e,n,r,s,i,a){return this.transform(F.MATRIX(e,n,r,s,i,a))},t.prototype.skewX=function(e){return this.transform(F.SKEW_X(e))},t.prototype.skewY=function(e){return this.transform(F.SKEW_Y(e))},t.prototype.xSymmetry=function(e){return this.transform(F.X_AXIS_SYMMETRY(e))},t.prototype.ySymmetry=function(e){return this.transform(F.Y_AXIS_SYMMETRY(e))},t.prototype.annotateArcs=function(){return this.transform(F.ANNOTATE_ARCS())},t}(),gs=function(t){return t===" "||t==="	"||t==="\r"||t===`
`},nn=function(t){return 48<=t.charCodeAt(0)&&t.charCodeAt(0)<=57},ms=function(t){function e(){var n=t.call(this)||this;return n.curNumber="",n.curCommandType=-1,n.curCommandRelative=!1,n.canParseCommandOrComma=!0,n.curNumberHasExp=!1,n.curNumberHasExpDigits=!1,n.curNumberHasDecimal=!1,n.curArgs=[],n}return Nn(e,t),e.prototype.finish=function(n){if(n===void 0&&(n=[]),this.parse(" ",n),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return n},e.prototype.parse=function(n,r){var s=this;r===void 0&&(r=[]);for(var i=function(c){r.push(c),s.curArgs.length=0,s.canParseCommandOrComma=!0},a=0;a<n.length;a++){var o=n[a],u=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),l=nn(o)&&(this.curNumber==="0"&&o==="0"||u);if(!nn(o)||l)if(o!=="e"&&o!=="E")if(o!=="-"&&o!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(o!=="."||this.curNumberHasExp||this.curNumberHasDecimal||u){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+a+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"')}this.curArgs.push(h),this.curArgs.length===vs[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?i({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):b.VERT_LINE_TO===this.curCommandType?i({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?i({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?i({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?i({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&i({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!gs(o))if(o===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(o!=="+"&&o!=="-"&&o!==".")if(l)this.curNumber=o,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+o+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,o!=="z"&&o!=="Z")if(o==="h"||o==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=o==="h";else if(o==="v"||o==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=o==="v";else if(o==="m"||o==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=o==="m";else if(o==="l"||o==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=o==="l";else if(o==="c"||o==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=o==="c";else if(o==="s"||o==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=o==="s";else if(o==="q"||o==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=o==="q";else if(o==="t"||o==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=o==="t";else{if(o!=="a"&&o!=="A")throw new SyntaxError('Unexpected character "'+o+'" at index '+a+".");this.curCommandType=b.ARC,this.curCommandRelative=o==="a"}else r.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=o,this.curNumberHasDecimal=o==="."}else this.curNumber+=o,this.curNumberHasDecimal=!0;else this.curNumber+=o;else this.curNumber+=o,this.curNumberHasExp=!0;else this.curNumber+=o,this.curNumberHasExpDigits=this.curNumberHasExp}return r},e.prototype.transform=function(n){return Object.create(this,{parse:{value:function(r,s){s===void 0&&(s=[]);for(var i=0,a=Object.getPrototypeOf(this).parse.call(this,r);i<a.length;i++){var o=a[i],u=n(o);Array.isArray(u)?s.push.apply(s,u):s.push(u)}return s}}})},e}(Pn),b=function(t){function e(n){var r=t.call(this)||this;return r.commands=typeof n=="string"?e.parse(n):n,r}return Nn(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var n=F.CALCULATE_BOUNDS();return this.transform(n),n},e.prototype.transform=function(n){for(var r=[],s=0,i=this.commands;s<i.length;s++){var a=n(i[s]);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return this.commands=r,this},e.encode=function(n){return Vn(n)},e.parse=function(n){var r=new ms,s=[];return r.parse(n,s),r.finish(s),s},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(Pn),vs=((tt={})[b.MOVE_TO]=2,tt[b.LINE_TO]=2,tt[b.HORIZ_LINE_TO]=1,tt[b.VERT_LINE_TO]=1,tt[b.CLOSE_PATH]=0,tt[b.QUAD_TO]=4,tt[b.SMOOTH_QUAD_TO]=2,tt[b.CURVE_TO]=6,tt[b.SMOOTH_CURVE_TO]=4,tt[b.ARC]=7,tt),ft;function dt(t){if(t.children!==void 0)return t.children;let e,n=0;const r=t.childNodes,s=[];for(;e=r[n++];)e.nodeType===1&&s.push(e);return s}function Ee(t){const e=t.parentNode;return e&&e.nodeType===Node.ELEMENT_NODE?e:null}function ie(t,e){for(;e.firstChild;)t.append(e.firstChild);return t}function wt(t){if(t===null)return null;const e=/url\('#?(.*?)'\)/.exec(t)||/url\("#?(.*?)"\)/.exec(t)||/url\(#?(.*?)\)/.exec(t);return e&&e.length>1?e[1]:null}(function(t){t[t.SVG=0]="SVG",t[t.CANVAS=1]="CANVAS"})(ft||(ft={}));const kt="data-sketchy-clip-path",bs=/[acsqt]/i;function Ce(t){if(t.svgSketchDefs)return t.svgSketchDefs;const e=t.svgSketch,n=document.createElementNS("http://www.w3.org/2000/svg","defs");return e.childElementCount>0?e.insertBefore(n,e.firstElementChild):e.appendChild(n),t.svgSketchDefs=n,n}function rn(t){const e=t.getAttribute("points");if(!e)return[];let n;n=e.indexOf(" ")>0?/\s+/g:/,/g;const r=e.split(n),s=[];for(let i=0;i<r.length;i++){const a=r[i],o=a.split(",");if(o.length===2)s.push({x:parseFloat(o[0]),y:parseFloat(o[1])});else{const u=i+1;u<r.length&&(s.push({x:parseFloat(a),y:parseFloat(r[u])}),i=u)}}return s}function Q(t,e,n){let r=n;const s=e.getAttribute(kt),i=t.pencilFilter&&e.tagName!=="text";if(!(r.tagName==="g"&&r.attributes.length===0)&&(s||i)){const a=document.createElementNS("http://www.w3.org/2000/svg","g");a.appendChild(r),r=a}s&&(r.setAttribute("clip-path",`url(#${s})`),e.removeAttribute(kt)),i&&r.setAttribute("filter","url(#pencilTextureFilter)"),t.svgSketch.appendChild(r)}function Dt(t,e,n){return bs.test(e)&&(n=n?Object.assign(Object.assign({},n),{preserveVertices:!0}):{preserveVertices:!0}),t.rc.path(e,n)}function U(t,e,n,r){let s;if(s=r?e.getAttribute(n):getComputedStyle(e)[n]||e.getAttribute(n),!s){let i=Ee(e);const a=r;let o=a;return a&&a.referenced===e&&(i=a.root,o=a.parentContext),!i||i===t.sourceSvg?void 0:U(t,i,n,o)}return s}function Rn(t,e,n,r){let s;if(s=r?e.getAttribute("opacity"):getComputedStyle(e).opacity||e.getAttribute("opacity"),s){let u=1;u=s.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(s.substring(0,s.length-1))/100)):Math.min(1,Math.max(0,parseFloat(s))),n*=u}let i=Ee(e);const a=r;let o=a;return a&&a.referenced===e&&(i=a.root,o=a.parentContext),i&&i!==t.sourceSvg?Rn(t,i,n,o):n}function bt(t,e,n){const{fillId:r,strokeId:s}=function(i,a){function o(u){const l=a.getAttribute(u);if(l&&l.indexOf("url")!==-1){const h=wt(l);if(h&&i.idElements[h]instanceof SVGPatternElement)return h}return null}return{fillId:o("fill"),strokeId:o("stroke")}}(t,e);if(r!==null||s!==null){const i=n();i.setAttribute("fill",r!==null?`url(#${r})`:"none"),i.setAttribute("stroke",s!==null?`url(#${s})`:"none");const a=U(t,e,"stroke-width",t.useElementContext);i.setAttribute("stroke-width",a??"0"),Q(t,e,i),sn(t,r),sn(t,s)}}function sn(t,e){if(e===null)return;const n=Ce(t),r=`#${e}`;if(!n.querySelector(r)){const s=t.sourceSvg.querySelector(r);if(s){if(!t.sketchPatterns)return void n.appendChild(s.cloneNode(!0));const i=function(o,u,l){const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.appendChild(u);const c=Object.assign(Object.assign({},o),{sourceSvg:h,svgSketch:document.createElementNS("http://www.w3.org/2000/svg","svg"),roughConfig:Object.assign(Object.assign({},o.roughConfig),l)});return c.processElement(c,u,null),ie(document.createElementNS("http://www.w3.org/2000/svg","g"),c.svgSketch)}(t,ie(document.createElementNS("http://www.w3.org/2000/svg","g"),s.cloneNode(!0)),{fillStyle:"solid",roughness:.5}),a=s.cloneNode();n.appendChild(ie(a,i))}}}const ys=/^([+-]?(?:\d+|\d*\.\d+(?:[eE][+-]?\d+)?))([a-z]*|%)$/,on={in:96,cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,px:1},xs=Math.sqrt(2);function _t(t,e,n,r){const{value:s,unit:i}=oe(n);return function(a){return!!on[a]}(i)?function(a,o){var u;const l=(u=on[o])!==null&&u!==void 0?u:1;return a*l}(s,i):function(a,o,u,l,h){var c;const f=(c=a.viewBox)!==null&&c!==void 0?c:{w:0,h:0};if(h==="%")return function(p,d,{w:g,h:m}={w:0,h:0}){const v=d/100;return p==="x"?v*g:p==="y"?v*m:v*(Math.sqrt(g*g+m*m)/xs)}(u,l,f);if(h==="vw"||h==="vh"||h==="vmin"||h==="vmax")return function(p,d,{w:g,h:m}={w:0,h:0}){var v,y;const E=p/100,M=(v=window.innerWidth)!==null&&v!==void 0?v:g,O=(y=window.innerHeight)!==null&&y!==void 0?y:m;if(d==="vw")return E*M;if(d==="vh")return E*O;if(d==="vmin")return E*Math.min(M,O);if(d==="vmax")return E*Math.max(M,O);throw new Error(`Not a viewport length unit: ${d}`)}(l,h,f);if(h==="em"||h==="ex"||h==="ch"||h==="rem")return function(p,d,g,m){var v;if(m==="rem"){const O=document.documentElement,C=oe(getComputedStyle(O).fontSize);return g*(C.unit==="px"?C.value:16)}if(m==="ch"){const O=function(C){const x=Ee(C);if(!x)return 1;const T=document.createElementNS("http://www.w3.org/2000/svg","text");T.style.visibility="hidden",T.appendChild(document.createTextNode("0")),x.appendChild(T);const N=T.getBBox();return x.removeChild(T),N.width}(d);return g*O}const y=(v=U(p,d,"font-size",p.useElementContext))!==null&&v!==void 0?v:"16px",E=oe(y),M=E.unit==="px"?E.value:16;if(m==="em")return g*M;if(m==="ex")return g*M*.5;throw new Error(`Not a font relative unit: ${m}`)}(a,o,l,h);throw new Error(`Unsupported relative length unit: ${h}`)}(t,e,r,s,i)}function oe(t){const e=t.match(ys);if(e===null||e.length!==3)throw new Error(`Cannot parse dimension: ${t}`);return{value:parseFloat(e[1]),unit:e[2].toLowerCase()||"px"}}function Ot(t){if(!t)return!0;const e=t.matrix;return!e||e.a===1&&e.b===0&&e.c===0&&e.d===1&&e.e===0&&e.f===0}function ae(t){if(!t)return!0;const e=t.matrix;return!e||e.a===1&&e.b===0&&e.c===0&&e.d===1}function A(t,e){if(!e)return t;const n=e.matrix;return{x:n.a*t.x+n.c*t.y+n.e,y:n.b*t.x+n.d*t.y+n.f}}function an(t){return t.transform&&t.transform.baseVal.numberOfItems>0?t.transform.baseVal.consolidate():null}function Nt(t,e,n){if(!n)return an(e);const r=an(e);if(r){const s=r.matrix,i=n.matrix.multiply(s);return t.sourceSvg.createSVGTransformFromMatrix(i)}return n}function pt(t,e,n){if(e&&e.matrix&&!Ot(e)){const r=e.matrix;n.transform.baseVal.numberOfItems>0?n.transform.baseVal.getItem(0).setMatrix(r):n.transform.baseVal.appendItem(e)}}function ln(t){var e;let n=t.getAttribute("stop-color");if(!n){const r=(e=t.getAttribute("style"))!==null&&e!==void 0?e:"",s=/stop-color:\s?(.*);?/.exec(r);s&&s.length>1&&(n=s[1])}return w(n||"white")}function un(t){const e=t.length;let n=0,r=0,s=0,i=0;return t.forEach(a=>{const o=a.toRgb();n+=o.r*o.r,r+=o.g*o.g,s+=o.b*o.b,i+=o.a}),w({r:Math.sqrt(n/e),g:Math.sqrt(r/e),b:Math.sqrt(s/e),a:i/e})}function ws(t){const e=t.getAttribute("offset");return e?e.indexOf("%")?parseFloat(e.substring(0,e.length-1)):100*parseFloat(e):0}function Ms(t,e){if(t.roughConfig.fillStyle==="solid")return{angle:0,gap:0,weight:0};const{width:n,height:r}=e.getBoundingClientRect(),s=n/r,i=Math.sqrt(n*r),{angle:a,gap:o,weight:u}=function(l){const h={angle:{normal:[-30,-50],horizontal:[-30,-50],vertical:[-30,-50]},weight:{normal:[.5,3],small:[.5,3]},gap:{normal:[3,5],small:[3,5]}},c={angle:{normal:[-30,-50],horizontal:[-50,-75],vertical:[-30,-15]},weight:{normal:[1,3],small:[.5,1.7]},gap:{normal:[2,5],small:[1,3]}};switch(l){default:return c;case"zigzag":case"zigzag-line":return Object.assign(Object.assign({},c),{weight:{normal:[.5,3],small:[.5,2]},gap:{normal:[2,6],small:[2,5]}});case"cross-hatch":return Object.assign(Object.assign({},c),{weight:{normal:[1,3],small:[.5,1.3]},gap:{normal:[4,8],small:[2,5]}});case"dots":return h}}(t.roughConfig.fillStyle);return{angle:Ss(t,a,s),gap:As(t,o,i),weight:Es(t,u,i)}}function Ss({rng:t},{normal:e,horizontal:n,vertical:r},s){if(isFinite(s)){if(s<.25)return t.next(n);if(s>6)return t.next(r)}return t.next(e)}function As({rng:t},{normal:e,small:n},r){return r<45?t.next(n):t.next(e)}function Es({rng:t},{normal:e,small:n},r){return r<45?t.next(n):t.next(e)}function ot(t,e,n){var r;const s=(r=t.roughConfig.fixedDecimalPlaceDigits)!==null&&r!==void 0?r:15,i=Object.assign({},t.roughConfig);let a=1;if(!Ot(n)){const g=n.matrix,m=g.a*g.d-g.c*g.b;a=Math.sqrt(Math.abs(m))}const o=Rn(t,e,1,t.useElementContext),u=U(t,e,"fill",t.useElementContext)||"black",l=o*hn(e,"fill-opacity");if(u)if(u.indexOf("url")!==-1){const g=cn(t,u,l);g!=="none"?i.fill=g:delete i.fill}else if(u==="none")delete i.fill;else{const g=w(u);g.setAlpha(l),i.fill=g.toString()}const h=U(t,e,"stroke",t.useElementContext),c=o*hn(e,"stroke-opacity");if(h)if(h.indexOf("url")!==-1)i.stroke=cn(t,h,c);else if(h==="none")i.stroke="none";else{const g=w(h);g.setAlpha(c),i.stroke=g.toString()}else i.stroke="none";const f=U(t,e,"stroke-width",t.useElementContext);if(f){const g=_t(t,e,f,"stroke-width")*a;i.strokeWidth=parseFloat(g.toFixed(s))}else i.strokeWidth=1;const p=U(t,e,"stroke-dasharray",t.useElementContext);p&&p!=="none"&&(i.strokeLineDash=p.split(/[\s,]+/).filter(g=>g.length>0).map(g=>{const m=_t(t,e,g,"stroke-dasharray")*a;return Math.max(.5,parseFloat(m.toFixed(s)))}));const d=U(t,e,"stroke-dashoffset",t.useElementContext);if(d){const g=_t(t,e,d,"stroke-dashoffset")*a;i.strokeLineDashOffset=parseFloat(g.toFixed(s))}if(i.fill&&i.stroke==="none"&&(i.stroke=i.fill,i.strokeWidth=1),t.randomize){const{angle:g,gap:m,weight:v}=Ms(t,e);i.hachureAngle=g,i.hachureGap=Math.round(m),i.fillWeight=parseFloat(v.toFixed(s)),i.disableMultiStroke===void 0&&(i.disableMultiStroke=t.rng.next()>.3)}return i}function hn(t,e){const n=getComputedStyle(t)[e]||t.getAttribute(e);return n?n.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(n.substring(0,n.length-1))/100)):Math.min(1,Math.max(0,parseFloat(n))):1}function cn(t,e,n){const r=wt(e);if(!r)return"none";const s=t.idElements[r];if(!s)return"none";if(typeof s=="string")return s;if(s instanceof SVGLinearGradientElement||s instanceof SVGRadialGradientElement){const i=function(a,o){const u=Array.prototype.slice.apply(a.querySelectorAll("stop"));if(u.length===0)return"transparent";if(u.length===1){const l=ln(u[0]);return l.setAlpha(o),l.toString()}{const h=[];let c=null;for(let p=0;p<u.length;p++){const d=ln(u[p]),g=ws(u[p]),m=c?un([c,d]):d;let v=Math.max(1,g/10|0);for(;v>0;)h.push(m),v--;c=d}const f=un(h);return f.setAlpha(o),f.toString()}}(s,n);return t.idElements[r]=i,i}return"none"}function _(t){return`${t.x},${t.y}`}function Zt(t,e,n,r){if(n.length===0)return;const s=n[0],i=n[n.length-1],a=wt(e.getAttribute("marker-start")),o=a?t.idElements[a]:null;if(o&&n.length>1){let f=o.orientAngle.baseVal.value;const p=n[1],d=o.getAttribute("orient");if(d==="auto"||d==="auto-start-reverse"){const y=d==="auto"?0:180,E=n[n.length-2];fn(n)?f=ue(E,i,p)-y:f=Xt({x:1,y:0},{x:p.x-s.x,y:p.y-s.y})-y}const g=t.sourceSvg.createSVGMatrix().translate(s.x,s.y).rotate(f).scale(le(t,o,e)),m=r?r.matrix.multiply(g):g,v=t.sourceSvg.createSVGTransformFromMatrix(m);t.processElement(t,o,v)}const u=wt(e.getAttribute("marker-end")),l=u?t.idElements[u]:null;if(l){let f=l.orientAngle.baseVal.value;if(n.length>1){const m=l.getAttribute("orient");if(m==="auto"||m==="auto-start-reverse"){const v=n[n.length-2];fn(n)?f=ue(v,i,n[1]):f=Xt({x:1,y:0},{x:i.x-v.x,y:i.y-v.y})}}const p=t.sourceSvg.createSVGMatrix().translate(i.x,i.y).rotate(f).scale(le(t,l,e)),d=r?r.matrix.multiply(p):p,g=t.sourceSvg.createSVGTransformFromMatrix(d);t.processElement(t,l,g)}const h=wt(e.getAttribute("marker-mid")),c=h?t.idElements[h]:null;if(c&&n.length>2)for(let f=0;f<n.length;f++){const p=n[f];if(f===0||f===n.length-1)continue;let d=c.orientAngle.baseVal.value;const g=c.getAttribute("orient");(g==="auto"||g==="auto-start-reverse")&&(d=ue(n[f-1],p,n[f+1]));const m=t.sourceSvg.createSVGMatrix().translate(p.x,p.y).rotate(d).scale(le(t,c,e)),v=r?r.matrix.multiply(m):m,y=t.sourceSvg.createSVGTransformFromMatrix(v);t.processElement(t,c,y)}}function le(t,e,n){const r=e.getAttribute("markerUnits");let s=1;if(!r||r==="strokeWidth"){const i=U(t,n,"stroke-width");i&&(s=_t(t,n,i,"stroke-width"))}return s}function fn(t){return e=t[0],n=t[t.length-1],e.x===n.x&&e.y===n.y;var e,n}function ue(t,e,n){const r={x:n.x-e.x,y:n.y-e.y},s=Xt(r,{x:t.x-e.x,y:t.y-e.y}),i=e.x+1,a=e.y,o=Xt(r,{x:i-e.x,y:a-e.y});return((u=s)-180*Math.sign(u))/2-o;var u}function Xt(t,e){const n=Math.atan2(t.y,t.x),r=Math.atan2(e.y,e.x)-n,s=-Math.sign(r)*Math.PI*2,i=Math.abs(s+r)<Math.abs(r)?s+r:r;return Math.round(360*i/(2*Math.PI))}function pn(t,e,{x:n,y:r,w:s,h:i}){bt(t,e,()=>{const a=document.createElementNS("http://www.w3.org/2000/svg","rect");return a.x.baseVal.value=n,a.y.baseVal.value=r,a.width.baseVal.value=s,a.height.baseVal.value=i,a})}function Cs(t,e,n,r){const s=wt(n);if(!s)return;const i=t.idElements[s];if(!i)return;const a=Ce(t),o=`${s}_${a.childElementCount}`,u=document.createElementNS("http://www.w3.org/2000/svg","clipPath");u.id=o,function(c,f){if(c.tagName!=="g")return void c.setAttribute(kt,f);const p=[],d=dt(c);for(let g=d.length-1;g>=0;g--)p.push(d[g]);for(;p.length>0;){const g=p.pop();g.setAttribute(kt,f);const m=dt(g);for(let v=m.length-1;v>=0;v--)p.push(m[v])}}(e,o);const l=[],h=dt(i);for(let c=h.length-1;c>=0;c--){const f=h[c],p=Nt(t,f,r);l.push({element:f,transform:p})}for(;l.length>0;){const{element:c,transform:f}=l.pop();try{_s(t,c,u,f)}catch(d){console.error(d)}if(c.tagName==="defs"||c.tagName==="svg"||c.tagName==="clipPath"||c.tagName==="text")continue;const p=dt(c);for(let d=p.length-1;d>=0;d--){const g=p[d],m=Nt(t,g,f);l.push({element:g,transform:m})}}u.childNodes.length>0&&a.appendChild(u)}function _s(t,e,n,r){switch(e.tagName){case"rect":(function(s,i,a,o){const u=i.x.baseVal.value,l=i.y.baseVal.value,h=i.width.baseVal.value,c=i.height.baseVal.value;if(h===0||c===0)return;const f=i.hasAttribute("rx")?i.rx.baseVal.value:null,p=i.hasAttribute("ry")?i.ry.baseVal.value:null,d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.x.baseVal.value=u,d.y.baseVal.value=l,d.width.baseVal.value=h,d.height.baseVal.value=c,f&&(d.rx.baseVal.value=f),p&&(d.ry.baseVal.value=p),pt(0,o,d),a.appendChild(d)})(0,e,n,r);break;case"circle":(function(s,i,a,o){const u=i.cx.baseVal.value,l=i.cy.baseVal.value,h=i.r.baseVal.value;if(h===0)return;const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.cx.baseVal.value=u,c.cy.baseVal.value=l,c.r.baseVal.value=h,pt(0,o,c),a.appendChild(c)})(0,e,n,r);break;case"ellipse":(function(s,i,a,o){const u=i.cx.baseVal.value,l=i.cy.baseVal.value,h=i.rx.baseVal.value,c=i.ry.baseVal.value;if(h===0||c===0)return;const f=document.createElementNS("http://www.w3.org/2000/svg","ellipse");f.cx.baseVal.value=u,f.cy.baseVal.value=l,f.rx.baseVal.value=h,f.ry.baseVal.value=c,pt(0,o,f),a.appendChild(f)})(0,e,n,r);break;case"polygon":(function(s,i,a,o){const u=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.setAttribute("points",i.getAttribute("points")),pt(0,o,u),a.appendChild(u)})(0,e,n,r);break;case"path":(function(s,i,a,o){const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d",i.getAttribute("d")),pt(0,o,u),a.appendChild(u)})(0,e,n,r)}}function Os(t,e,n){const r=document.createElementNS("http://www.w3.org/2000/svg","g");r.setAttribute("class","text-container"),pt(0,n,r);const s=e.cloneNode(!0);s.transform.baseVal.numberOfItems>0&&s.transform.baseVal.clear(),s.removeAttribute("clip-path");const{cssFont:i,fontSize:a}=function(l,h,c=!1){const f={};let p="";const d=U(l,h,"font-style",l.useElementContext);d&&(p+=c?`font-style: ${d};`:d,f.fontStyle=d);const g=U(l,h,"font-weight",l.useElementContext);g&&(p+=c?`font-weight: ${g};`:` ${g}`,f.fontWeight=g);const m=U(l,h,"font-size",l.useElementContext);if(m&&(p+=c?`font-size: ${m};`:` ${m}`,f.fontSize=m),l.fontFamily)p+=c?`font-family: ${l.fontFamily};`:` ${l.fontFamily}`,f.fontFamiliy=l.fontFamily;else{const v=U(l,h,"font-family",l.useElementContext);v&&(p+=c?`font-family: ${v};`:` ${v}`,f.fontFamiliy=v)}return p=p.trim(),Object.assign(Object.assign({},f),{cssFont:p})}(t,e,!0);if(s.setAttribute("style",function(...l){let h="";l=l.filter(c=>c!==null);for(const c of l)h.length>0&&h[h.length-1]!==";"&&(h+=";"),h+=c;return h}(s.getAttribute("style"),i)),dn(t,e,s),s.childElementCount>0){const l=dt(s),h=dt(e);for(let c=0;c<l.length;c++){const f=l[c];f instanceof SVGTSpanElement&&dn(t,h[c],f)}}r.appendChild(s),Q(t,e,r);const o=t.fontFamily!==null,u=s.hasAttribute(kt);o&&u&&a&&function(l,h,c,f){const{width:p,height:d}=h.getBBox();if(p<=0||d<=0)return;const g=_t(l,c,f,"font-size");In(l,{w:p,h:d},c,g)}(t,e,s,a)}function In(t,e,n,r){const{w:s}=function({svgSketch:a,svgSketchIsInDOM:o},u){const l="visibility:hidden;position:absolute;left:-100%;top-100%;",h=a.getAttribute("style");h?a.setAttribute("style",`${h};${l}`):a.setAttribute("style",l);const c=document.body,f=a.parentElement;o||c.appendChild(a);const{width:p,height:d}=u.getBBox();return o||(c.removeChild(a),f&&f.appendChild(a)),h?a.setAttribute("style",h):a.removeAttribute("style"),{w:p,h:d}}(t,n);if(s<e.w||r<=1)return;const i=r-1;n.style.fontSize=`${i}px`,In(t,e,n,i)}function dn(t,e,n){const r=U(t,e,"stroke"),s=r?U(t,e,"stroke-width"):null,i=U(t,e,"fill"),a=U(t,e,"dominant-baseline"),o=U(t,e,"text-anchor",t.useElementContext);r&&n.setAttribute("stroke",r),s&&n.setAttribute("stroke-width",s),i&&n.setAttribute("fill",i),o&&n.setAttribute("text-anchor",o),a&&n.setAttribute("dominant-baseline",a)}function Ln(t,e,n,r,s){var i,a;const o=[],u={x:0,y:0,w:r??0,h:s??0};if(e instanceof SVGSVGElement||e instanceof SVGSymbolElement||e instanceof SVGMarkerElement){let l=0,h=0;if(e instanceof SVGSymbolElement)l=parseFloat((i=e.getAttribute("x"))!==null&&i!==void 0?i:"")||0,h=parseFloat((a=e.getAttribute("y"))!==null&&a!==void 0?a:"")||0,r=r??(parseFloat(e.getAttribute("width"))||void 0),s=s??(parseFloat(e.getAttribute("height"))||void 0);else if(e instanceof SVGMarkerElement){const d=e.getAttribute("markerWidth"),g=e.getAttribute("markerHeight");r=d!==null?parseFloat(d):3,s=g!==null?parseFloat(g):3}else e!==t.sourceSvg&&(l=e.x.baseVal.value,h=e.y.baseVal.value);let c=t.sourceSvg.createSVGMatrix();if(e.getAttribute("viewBox")){const{x:d,y:g,width:m,height:v}=e.viewBox.baseVal;if(u.x=d,u.y=g,u.w=m,u.h=v,r!==void 0&&s!==void 0){const y=r/m,E=s/v,M=l+.5*r,O=h+.5*s,C=d+.5*m,x=g+.5*v;c=c.translate(M,O),c=e.getAttribute("preserveAspectRatio")==="none"?c.scaleNonUniform(y,E):c.scale(Math.min(y,E)),c=c.translate(-C,-x)}}else c=c.translate(l,h);e instanceof SVGMarkerElement&&(c=c.translate(-e.refX.baseVal.value,-e.refY.baseVal.value));const f=n?n.matrix.multiply(c):c;n=t.sourceSvg.createSVGTransformFromMatrix(f);const p=dt(e);for(let d=p.length-1;d>=0;d--){const g=p[d];if(g instanceof SVGSymbolElement||g instanceof SVGMarkerElement)continue;const m=Nt(t,g,n);o.push({element:g,transform:m,viewBox:u})}}else o.push({element:e,transform:n,viewBox:u});for(;o.length>0;){const{element:l,transform:h,viewBox:c}=o.pop();try{t.viewBox=c,Ts(t,l,h)}catch(p){console.error(p)}if(l.tagName==="defs"||l.tagName==="symbol"||l.tagName==="marker"||l.tagName==="svg"||l.tagName==="clipPath")continue;const f=dt(l);for(let p=f.length-1;p>=0;p--){const d=f[p],g=Nt(t,d,h);o.push({element:d,transform:g,viewBox:c})}}}function Ts(t,e,n){if(function(s){const i=s.style;return!!i&&(i.display==="none"||i.visibility==="hidden")}(e))return;const r=e.getAttribute("clip-path");switch(r&&Cs(t,e,r,n),e.tagName){case"svg":case"symbol":(function(s,i,a){let o=parseFloat(i.getAttribute("width")),u=parseFloat(i.getAttribute("height"));(isNaN(o)||isNaN(u))&&(o=u=void 0),Ln(s,i,a,o,u)})(t,e,n);break;case"rect":(function(s,i,a){const o=i.x.baseVal.value,u=i.y.baseVal.value,l=i.width.baseVal.value,h=i.height.baseVal.value;if(l===0||h===0)return;let c=i.hasAttribute("rx")?Math.min(Math.max(0,i.rx.baseVal.value),l/2):null,f=i.hasAttribute("ry")?Math.min(Math.max(0,i.ry.baseVal.value),h/2):null;c===null&&f===null||(c=c===null?f:c,f=f===null?c:f);const p=A({x:o,y:u},a),d=A({x:o+l,y:u+h},a),g=d.x-p.x,m=d.y-p.y,v={x:p.x,y:p.y,w:g,h:m};if(!Ot(a)&&!ae(a)||c||f){let y="";if(c!==null&&f!==null){const M=1.3333333333333333*(Math.sqrt(2)-1),O=A({x:o+c,y:u},a);y+=`M ${_(O)}`,y+=`L ${_(A({x:o+l-c,y:u},a))}`;const C=A({x:o+l-c+M*c,y:u},a),x=A({x:o+l,y:u+M*f},a),T=A({x:o+l,y:u+f},a);y+=`C ${_(C)} ${_(x)} ${_(T)}`,y+=`L ${_(A({x:o+l,y:u+h-f},a))}`;const N=A({x:o+l,y:u+h-f+M*f},a),I=A({x:o+l-M*c,y:u+h},a),L=A({x:o+l-c,y:u+h},a);y+=`C ${_(N)} ${_(I)} ${_(L)}`,y+=`L ${_(A({x:o+c,y:u+h},a))}`;const V=A({x:o+c-M*c,y:u+h},a),k=A({x:o,y:u+h-M*f},a),z=A({x:o,y:u+h-f},a);y+=`C ${_(V)} ${_(k)} ${_(z)}`,y+=`L ${_(A({x:o,y:u+f},a))}`;const $=A({x:o,y:u+M*f},a),R=A({x:o+M*c,y:u},a);y+=`C ${_($)} ${_(R)} ${_(O)}`,y+="z"}else{const M=A({x:o,y:u},a),O=A({x:o+l,y:u},a),C=A({x:o+l,y:u+h},a),x=A({x:o,y:u+h},a);y+=`M ${_(M)}`,y+=`L ${_(O)}`,y+=`L ${_(C)}`,y+=`L ${_(x)}`,y+="z"}const E=Dt(s,y,ot(s,i,a));pn(s,i,v),Q(s,i,E)}else{const y=s.rc.rectangle(v.x,v.y,v.w,v.h,ot(s,i,a));pn(s,i,v),Q(s,i,y)}})(t,e,n);break;case"path":(function(s,i,a){const o=i.getAttribute("d"),u=new b(o).toAbs().transform(F.NORMALIZE_HVZ()).transform(F.NORMALIZE_ST()),l=new b(u.commands.map(d=>Object.assign({},d)));a&&l.transform(F.MATRIX(a.matrix.a,a.matrix.b,a.matrix.c,a.matrix.d,a.matrix.e,a.matrix.f));const h=Vn(l.commands);if(h.indexOf("undefined")!==-1)return void console.error("broken path data");const c=Dt(s,h,ot(s,i,a));bt(s,i,()=>{const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",h),d}),Q(s,i,c);const f=[];let p;u.commands.forEach(d=>{switch(d.type){case b.MOVE_TO:{const g={x:d.x,y:d.y};f.push(g),p=g;break}case b.LINE_TO:case b.QUAD_TO:case b.SMOOTH_QUAD_TO:case b.CURVE_TO:case b.SMOOTH_CURVE_TO:case b.ARC:f.push({x:d.x,y:d.y});break;case b.HORIZ_LINE_TO:f.push({x:d.x,y:0});break;case b.VERT_LINE_TO:f.push({x:0,y:d.y});break;case b.CLOSE_PATH:p&&f.push(p)}}),Zt(s,i,f,a)})(t,e,n);break;case"use":(function(s,i,a){let o=i.href.baseVal;o.startsWith("#")&&(o=o.substring(1));const u=s.idElements[o];if(u){let l,h;i.getAttribute("width")&&i.getAttribute("height")&&(l=i.width.baseVal.value,h=i.height.baseVal.value);const c=i.x.baseVal.value,f=i.y.baseVal.value;let p=s.sourceSvg.createSVGMatrix().translate(c,f);p=a?a.matrix.multiply(p):p;const d=s.sourceSvg.createSVGTransformFromMatrix(p);if(s.useElementContext){const g={root:i,referenced:u,parentContext:Object.assign({},s.useElementContext)};s.useElementContext=g}else s.useElementContext={root:i,referenced:u,parentContext:null};s.processElement(s,u,Nt(s,u,d),l,h),s.useElementContext.parentContext?s.useElementContext=s.useElementContext.parentContext:s.useElementContext=null}})(t,e,n);break;case"line":(function(s,i,a){const o={x:i.x1.baseVal.value,y:i.y1.baseVal.value},u={x:i.x2.baseVal.value,y:i.y2.baseVal.value},{x:l,y:h}=A(o,a),{x:c,y:f}=A(u,a);if(l===c&&h===f)return;const p=s.rc.line(l,h,c,f,ot(s,i,a));bt(s,i,()=>{const d=document.createElementNS("http://www.w3.org/2000/svg","line");return d.x1.baseVal.value=l,d.y1.baseVal.value=h,d.x2.baseVal.value=c,d.y2.baseVal.value=f,d}),Q(s,i,p),Zt(s,i,[o,u],a)})(t,e,n);break;case"circle":(function(s,i,a){const o=i.cx.baseVal.value,u=i.cy.baseVal.value,l=i.r.baseVal.value;if(l===0)return;const h=A({x:o,y:u},a),c=A({x:o+l,y:u+l},a).x-h.x;let f;if(Ot(a)||ae(a))f=s.rc.circle(h.x,h.y,2*c,Object.assign(Object.assign({},ot(s,i,a)),{preserveVertices:!0}));else{const p=1.3333333333333333*(Math.sqrt(2)-1),d=A({x:o+l,y:u},a),g=A({x:o,y:u+l},a),m=A({x:o-l,y:u},a),v=A({x:o,y:u-l},a),y=A({x:o+l,y:u+p*l},a),E=A({x:o+p*l,y:u+l},a),M=A({x:o-l,y:u+p*l},a),O=A({x:o-p*l,y:u-l},a),C=A({x:o+l,y:u-p*l},a);f=Dt(s,`M ${_(d)} C ${_(y)} ${_(E)} ${_(g)} S ${_(M)} ${_(m)} S ${_(O)} ${_(v)} S ${_(C)} ${_(d)}z`,ot(s,i,a))}bt(s,i,()=>{const p=document.createElementNS("http://www.w3.org/2000/svg","circle");return p.cx.baseVal.value=h.x,p.cy.baseVal.value=h.y,p.r.baseVal.value=c,p}),Q(s,i,f)})(t,e,n);break;case"ellipse":(function(s,i,a){const o=i.cx.baseVal.value,u=i.cy.baseVal.value,l=i.rx.baseVal.value,h=i.ry.baseVal.value;if(l===0||h===0)return;const c=A({x:o,y:u},a),f=A({x:o+l,y:u+h},a),p=f.x-c.x,d=f.y-c.y;let g;if(Ot(a)||ae(a))g=s.rc.ellipse(c.x,c.y,2*p,2*d,Object.assign(Object.assign({},ot(s,i,a)),{preserveVertices:!0}));else{const m=1.3333333333333333*(Math.sqrt(2)-1),v=A({x:o+l,y:u},a),y=A({x:o,y:u+h},a),E=A({x:o-l,y:u},a),M=A({x:o,y:u-h},a),O=A({x:o+l,y:u+m*h},a),C=A({x:o+m*l,y:u+h},a),x=A({x:o-l,y:u+m*h},a),T=A({x:o-m*l,y:u-h},a),N=A({x:o+l,y:u-m*h},a);g=Dt(s,`M ${_(v)} C ${_(O)} ${_(C)} ${_(y)} S ${_(x)} ${_(E)} S ${_(T)} ${_(M)} S ${_(N)} ${_(v)}z`,ot(s,i,a))}bt(s,i,()=>{const m=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return m.cx.baseVal.value=c.x,m.cy.baseVal.value=c.y,m.rx.baseVal.value=p,m.ry.baseVal.value=d,m}),Q(s,i,g)})(t,e,n);break;case"polyline":(function(s,i,a){const o=rn(i),u=o.map(h=>{const c=A(h,a);return[c.x,c.y]}),l=ot(s,i,a);if(bt(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polyline");return h.setAttribute("points",u.join(" ")),h}),l.fill&&l.fill!=="none"){const h=Object.assign(Object.assign({},l),{stroke:"none"});Q(s,i,s.rc.polygon(u,h))}Q(s,i,s.rc.linearPath(u,l)),Zt(s,i,o,a)})(t,e,n);break;case"polygon":(function(s,i,a){const o=rn(i),u=o.map(h=>{const c=A(h,a);return[c.x,c.y]}),l=s.rc.polygon(u,ot(s,i,a));bt(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polygon");return h.setAttribute("points",u.join(" ")),h}),Q(s,i,l),o.length>0&&(o.push(o[0]),Zt(s,i,o,a))})(t,e,n);break;case"text":Os(t,e,n);break;case"image":(function(s,i,a){const o=i.href.baseVal,u=i.x.baseVal.value,l=i.y.baseVal.value;let h,c;if(i.getAttribute("width")&&i.getAttribute("height")&&(h=i.width.baseVal.value,c=i.height.baseVal.value),o.startsWith("data:")&&o.indexOf("image/svg+xml")!==-1){const f=/^data:([^,]*),(.*)/.exec(o);if(f&&f.length>2){const p=f[1];let d=f[2];const g=p.indexOf("base64")!==-1,m=p.indexOf("utf8")!==-1;g&&(d=atob(d)),m||(d=decodeURIComponent(d));const v=new DOMParser().parseFromString(d,"image/svg+xml").firstChild;let y=s.sourceSvg.createSVGMatrix().translate(u,l);y=a?a.matrix.multiply(y):y,s.processElement(s,v,s.sourceSvg.createSVGTransformFromMatrix(y),h,c)}}else{const f=i.cloneNode(),p=document.createElementNS("http://www.w3.org/2000/svg","g");pt(0,a,p),p.appendChild(f),Q(s,i,p)}})(t,e,n);break;case"foreignObject":(function(s,i,a){const o=i.cloneNode(!0),u=document.createElementNS("http://www.w3.org/2000/svg","g"),l=["color","font-family","font-size","font-style","font-variant","font-weight"],h=getComputedStyle(i);for(const c of l)u.style.setProperty(c,h.getPropertyValue(c));o.transform.baseVal.clear(),pt(0,a,u),u.appendChild(o),Q(s,o,u)})(t,e,n)}}class ks{constructor(e){this.rng=e?new xn(e):null}next(e){var n,r;const s=(r=(n=this.rng)===null||n===void 0?void 0:n.next())!==null&&r!==void 0?r:Math.random();if(e){const i=e[0];return s*(e[1]-i)+i}return s}}class Ns{set svg(e){this.$svg!==e&&(this.$svg=e,this.sourceSvgChanged())}get svg(){return this.$svg}set outputType(e){if(this.$outputType!==e){if(e===ft.CANVAS&&this.outputElement instanceof SVGSVGElement||e===ft.SVG&&this.outputElement instanceof HTMLCanvasElement)throw new Error(`Output format ${e} incompatible with given output element ${this.outputElement.tagName}`);this.$outputType=e}}get outputType(){return this.$outputType}set roughConfig(e){e.fixedDecimalPlaceDigits===void 0&&(e.fixedDecimalPlaceDigits=3),this.$roughConfig=e}get roughConfig(){return this.$roughConfig}constructor(e,n=ft.SVG,r={}){if(this.backgroundColor=null,this.fontFamily="Comic Sans MS, cursive",this.randomize=!0,this.seed=null,this.sketchPatterns=!0,this.pencilFilter=!1,this.width=0,this.height=0,this.$roughConfig={},this.idElements={},this.lastResult=null,!e)throw new Error("No target provided");const s=typeof e=="string"?document.querySelector(e):e;if(!s)throw new Error("Could not find target in document");this.roughConfig=r,this.outputElement=s,s instanceof HTMLCanvasElement?this.$outputType=ft.CANVAS:s instanceof SVGSVGElement?this.$outputType=ft.SVG:this.$outputType=n}sketch(e=!1){var n,r;if(!this.svg)return Promise.resolve(null);e&&this.sourceSvgChanged();const s=this.prepareRenderContainer(),i=this.createRenderContext(s);if(this.pencilFilter&&Ce(i).appendChild(function(){const a=document.createElementNS("http://www.w3.org/2000/svg","filter");a.setAttribute("id","pencilTextureFilter"),a.setAttribute("x","0%"),a.setAttribute("y","0%"),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("filterUnits","objectBoundingBox");const o=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");o.setAttribute("type","fractalNoise"),o.setAttribute("baseFrequency","2"),o.setAttribute("numOctaves","5"),o.setAttribute("stitchTiles","stitch"),o.setAttribute("result","f1"),a.appendChild(o);const u=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");u.setAttribute("type","matrix"),u.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),u.setAttribute("result","f2"),a.appendChild(u);const l=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return l.setAttribute("operator","in"),l.setAttribute("in","SourceGraphic"),l.setAttribute("in2","f2"),l.setAttribute("result","f3"),a.appendChild(l),a}()),i.processElement(i,this.svg,null,this.width,this.height),this.outputElement instanceof SVGSVGElement)return Promise.resolve(this.outputElement);if(this.outputElement instanceof HTMLCanvasElement)return this.drawToCanvas(i,this.outputElement);if((r=(n=this.lastResult)===null||n===void 0?void 0:n.parentNode)===null||r===void 0||r.removeChild(this.lastResult),this.outputType===ft.SVG){const a=i.svgSketch;return this.outputElement.appendChild(a),this.lastResult=a,Promise.resolve(a)}{const a=document.createElement("canvas");return this.outputElement.appendChild(a),this.lastResult=a,this.drawToCanvas(i,a)}}createRenderContext(e){if(!this.svg)throw new Error("No source SVG set yet.");let n=this.roughConfig;return this.seed!==null&&(n=Object.assign({seed:this.seed},n)),{rc:Gr.svg(e,{options:n}),roughConfig:this.roughConfig,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,rng:new ks(this.seed),sketchPatterns:this.sketchPatterns,idElements:this.idElements,sourceSvg:this.svg,svgSketch:e,svgSketchIsInDOM:document.body.contains(e),styleSheets:Array.from(this.svg.querySelectorAll("style")).map(r=>r.sheet).filter(r=>r!==null),processElement:Ln}}drawToCanvas(e,n){n.width=this.width,n.height=this.height;const r=n.getContext("2d");return r.clearRect(0,0,this.width,this.height),new Promise(s=>{const i=new XMLSerializer().serializeToString(e.svgSketch),a=new Image;a.onload=function(){r.drawImage(this,0,0),s(n)},a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(i)}`})}prepareRenderContainer(){let e,n;for(e=this.outputElement instanceof SVGSVGElement?this.outputElement:document.createElementNS("http://www.w3.org/2000/svg","svg"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");e.firstChild;)e.removeChild(e.firstChild);return e.setAttribute("width",this.width.toString()),e.setAttribute("height",this.height.toString()),this.backgroundColor&&(n=document.createElementNS("http://www.w3.org/2000/svg","rect"),n.width.baseVal.value=this.width,n.height.baseVal.value=this.height,n.setAttribute("fill",this.backgroundColor),e.appendChild(n)),e.setAttribute("stroke-linecap","round"),e}sourceSvgChanged(){const e=this.$svg;if(e){const n=this.roughConfig.fixedDecimalPlaceDigits;this.width=parseFloat(this.coerceSize(e,"width",300).toFixed(n)),this.height=parseFloat(this.coerceSize(e,"height",150).toFixed(n)),this.collectElementsWithID()}}collectElementsWithID(){this.idElements={};const e=Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]"));for(const n of e){const r=n.getAttribute("id");r&&(this.idElements[r]=n)}}coerceSize(e,n,r){let s=r;const i=e.hasAttribute("viewBox");return e.hasAttribute(n)?s=e[n].baseVal.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&i?e.viewBox.baseVal[n]:e[n].baseVal.value:i&&(s=e.viewBox.baseVal[n]),s}}var Vs=xe('Press <i class="fas fa-sync"></i> (Sync button) or <kbd></kbd> to sync.',1),Ps=xe('<div class="font-monotext-yellow-600 absolute z-10 w-full bg-base-100 bg-opacity-80 p-2 text-left" id="errorContainer">Diagram out of sync. <br> <!></div>'),Rs=xe('<!> <div id="view" class="h-full p-2 svelte-1ewr4tw"><div id="container" class="h-full overflow-auto svelte-1ewr4tw"></div></div>',1);function Us(t,e){Zn(e,!0);const n=Bn(),r=()=>Ve(he,"$stateStore",n),s=()=>Ve(Jt,"$inputStateStore",n);let i="",a="",o=St(void 0),u,l=St(void 0),h=St(!1),c=St(!1),f=St(!1),p=!0,d=r().panZoom,g;const m=()=>{if(!g)return;const x=g.getPan(),T=g.getZoom();Yn({pan:x,zoom:T}),Qn("panZoom")},v=x=>{x.panZoom&&(J(f,!0),g==null||g.destroy(),g=void 0,Promise.resolve().then(()=>{const T=document.querySelector("#graph-div");if(!T)return;g=pr(T,{onPan:m,onZoom:m,controlIconsEnabled:!0,fit:!0,center:!0});const{pan:N,zoom:I}=x;N!==void 0&&I!==void 0&&Number.isFinite(I)&&(g.zoom(I),g.pan(N)),J(f,!1)}))},y=async x=>{var I,L,V;const T=Date.now();if(x.error!==void 0){J(h,!0);return}J(h,!1);try{if(K(o)&&x&&(x.updateDiagram||x.autoSync)){if(x.autoSync||Pe(Jt,Pt(s).updateDiagram=!1,Pt(s)),J(c,!1),p=!0,i===x.code&&a===x.mermaid&&d===x.panZoom&&u===x.rough)return;if(!sr()){J(c,!0);return}i=x.code,a=x.mermaid,d=x.panZoom,u=x.rough;const k=(L=(I=K(l))==null?void 0:I.parentElement)==null?void 0:L.scrollTop;delete K(o).dataset.processed;const{svg:z,bindFunctions:$}=await Wn(Object.assign({},JSON.parse(x.mermaid)),i,"graph-div");if(z.length>0){v(x),K(o).innerHTML=z;const R=document.querySelector("#graph-div");if(!R)throw new Error("graph-div not found");if(x.rough){const q=new Ns("#container");q.svg=R,await q.sketch(),R.remove();const G=document.querySelector("#container > svg");if(!G)throw new Error("sketch not found");const H=G.getAttribute("height"),D=G.getAttribute("width");G.setAttribute("height","100%"),G.setAttribute("width","100%"),G.setAttribute("viewBox",`0 0 ${D} ${H}`),G.style.maxWidth="100%"}else R.setAttribute("height","100%"),R.style.maxWidth="100%",$&&$(R)}(V=K(l))!=null&&V.parentElement&&k&&(K(l).parentElement.scrollTop=k),J(h,!1)}else p?p=!1:(i!==x.code||a!==x.mermaid)&&J(c,!0)}catch(k){console.error("view fail",k),J(h,!0)}const N=Date.now()-T;jn({code:i,renderTime:N,isRough:x.rough}),rr(N,()=>{Pe(Jt,Pt(s).updateDiagram=!0,Pt(s))})};Jn(()=>{he.subscribe(x=>{y(x)}),window.addEventListener("resize",()=>{r().panZoom&&g&&g.resize()})});var E=Rs(),M=Te(E);Re(M,()=>K(c),x=>{var T=Ps(),N=Kt(ke(T),3);Re(N,()=>r().autoSync,I=>{var L=Gn("It will be updated automatically.");Rt(I,L)},I=>{var L=Vs(),V=Kt(Te(L),3);V.textContent=`${Xn??""} + Enter`,$n(),Rt(I,L)}),Ne(T),Rt(x,T)});var O=Kt(M,2),C=ke(O);Ie(C,x=>J(o,x),()=>K(o)),Ne(O),Ie(O,x=>J(l,x),()=>K(l)),Fn(()=>{te(O,"error",K(h)),te(O,"outOfSync",K(c)),te(C,"hide",K(f))}),Rt(t,E),Hn()}export{Us as V,Bs as s,te as t,Gs as w};
